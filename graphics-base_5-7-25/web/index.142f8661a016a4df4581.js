(()=>{"use strict";var e={551:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(81),a=i.n(s),n=i(645),o=i.n(n),l=i(667),r=i.n(l),u=new URL(i(685),i.b),h=o()(a()),_=r()(u);h.push([e.id,'@font-face{font-family:"DejaVu Sans";src:url('+_+') format("truetype")}html{visibility:visible !important}body{margin:0;background-color:#000000;overflow:hidden;font-family:"DejaVu Sans", sans-serif}html,body{user-select:none;-webkit-user-drag:none;-webkit-touch-callout:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}img:not([src]),img[src=""]{display:none}.page-collection{position:fixed;transform:translate(-50%, -50%);top:50%;left:50%}.page{clip-path:inset(0 0 0 0);-webkit-clip-path:inset(0 0 0 0);width:100%;height:100%}.component{position:absolute;user-select:none;-webkit-user-drag:none;-webkit-user-select:none;-webkit-touch-callout:none}.component img{width:100%;height:100%;position:absolute;transform:translateZ(0px);outline:1px solid transparent}.component.button img{position:absolute}.component.gauge>canvas{position:absolute}.gauge-animation{-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.component.gauge>img.gauge-overlay{position:absolute}.component.indicator{pointer-events:none}.component.indicator>img{pointer-events:auto}.component.indicator.allow-click-through>img{pointer-events:none}.levelgauge-animation{-webkit-transition:clip 0.25s ease-in;-moz-transition:clip 0.25s ease-in;-o-transition:clip 0.25s ease-in;transition:clip 0.25s ease-in}.notransition *{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}.levelgauge-leveltracker-animation{-webkit-transition:bottom 0.25s ease-in;-moz-transition:bottom 0.25s ease-in;-o-transition:bottom 0.25s ease-in;transition:bottom 0.25s ease-in}.component.levelgauge>div.levelgauge-level{width:100%;height:100%;bottom:0px;position:absolute}.component.levelgauge>div.levelgauge-level>img.levelgauge-levelimage .component.levelgauge>div.levelgauge-level>img.levelgauge-levelimage-low-threshold,.component.levelgauge>div.levelgauge-level>img.levelgauge-levelimage-high-threshold{width:100%;height:100%;position:relative}.component.button>img.img.navigationbutton-image{z-index:0}.component.button>img.img.navigationbutton-imagepressed{z-index:10}.component.signalvalue{overflow:hidden;display:table;table-layout:fixed;white-space:nowrap}.signalvalue-inner{display:table-cell}div.signalvalue-inner>div{display:inline;font-kerning:none}.component.textbox{overflow:hidden;display:table;table-layout:fixed;white-space:nowrap}.component.textbox>div{white-space:pre;font-kerning:none;display:table-cell}.text-halign-left{text-align:left}.text-halign-center{text-align:center}.text-halign-right{text-align:right}.text-valign-top{vertical-align:top}.text-valign-middle{vertical-align:middle}.text-valign-bottom{vertical-align:bottom}.hidden{display:none !important}.test-warning-message{background-color:#0000;z-index:500;position:fixed;font-size:1vw;text-align:center;top:2rem;margin-top:2rem;padding:1rem;color:#f00;border:0.2vw solid #f00;border-radius:0.5rem;left:50%;transform:translateX(-50%)}.checksum-warning-message{background-color:#0000;z-index:500;position:fixed;font-size:1vw;text-align:center;bottom:2rem;margin-bottom:2rem;padding:1rem;color:#f00;border:0.2vw solid #f00;border-radius:0.5rem;left:50%;transform:translateX(-50%)}@media (min-aspect-ratio: 800 / 200){.test-warning-message{position:absolute;top:0;right:0;border:0;margin:auto;height:10px;font-size:0.6rem}.checksum-warning-message{position:absolute;bottom:0;right:0;border:0;margin:auto;height:10px;font-size:0.6rem}}.test-warning-message:empty{display:none}.overlay{background:black;width:100%;height:100%;z-index:500;position:fixed;top:0;left:0}.overlay .overlay-text{font-size:4vh;text-align:center;color:#888}@media (min-aspect-ratio: 800 / 200){.overlay .overlay-text{font-size:1rem}}.overlay-reload{opacity:1;animation-name:fadeInOpacity;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:1s}@keyframes fadeInOpacity{0%{opacity:0}100%{opacity:1}}.overlay .checksum-warning{font-size:2.0vw;margin-top:5vh;text-align:center;color:#f00;z-index:501}@media (min-aspect-ratio: 800 / 200){.overlay .checksum-warning{background:#000;text-align:center;position:absolute;top:0;height:100%;width:100%;padding-top:15vh;font-size:1.1vw}}.allow-click-through{pointer-events:none}.external-page{height:100%;width:100%;position:absolute;z-index:100}.external-page-navigation-back{font-size:1.0vw;background-image:linear-gradient(to bottom, #a7afb6, #55636e 5%, #55636e 50%, #282e33 100%);display:block;color:#fff;text-decoration:none;text-shadow:1px 1px #333;padding:0.5rem 2rem;border:1px solid #333435;border-radius:0.3rem;box-shadow:0px 0px 5px -2px #888888}.external-page-iframe{height:100%;width:100%}.external-page-status{height:100%;width:100%;background-color:#000;position:fixed}.external-page-status .external-page-status-text{font-size:2.5vw;text-align:center;margin-top:45vh;color:#fff}.component.indicator.allow-click-through{pointer-events:none}.animated-loader-outer{text-align:center;margin-top:45vh;margin-bottom:4vh}@media (min-aspect-ratio: 800 / 200){.animated-loader-outer{margin-top:25vh}}.animated-loader{display:inline-block;width:10vh;height:10vh}@media (min-aspect-ratio: 800 / 200){.animated-loader{width:1rem;height:1rem}}.animated-loader:after{content:" ";display:block;width:7vh;height:7vh;margin:0;border-radius:50%;border:0.2rem solid #888;border-color:#888 transparent #888 transparent;animation:animated-loader 1.0s linear infinite}@media (min-aspect-ratio: 800 / 200){.animated-loader:after{width:0.8rem;height:0.8rem;border:0.15rem solid #888;border-color:#888 transparent #888 transparent}}@keyframes animated-loader{0%{transform:rotate(0deg)}25%{transform:rotate(90deg)}50%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}::-webkit-scrollbar{-webkit-appearance:none;width:8px}::-webkit-scrollbar-track{background-color:rgba(57,57,57,0.6);border-radius:8px}::-webkit-scrollbar-thumb{border-radius:8px;background-color:rgba(156,156,156,0.6)}.app-selector-link-timer-dialog{z-index:1010;position:fixed;background-color:rgba(255,255,255,0);top:0;right:0;bottom:0;left:0;pointer-events:none;transition:all 2.0s}.app-selector-link-timer-dialog>div{width:38vh;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:2vh;background:white;pointer-events:auto;background-color:#161616;border:0.01vh solid #444}.app-selector-link-timer-dialog-button{display:inline-block;background:#737373;color:#e2e2e2;padding:0vh;margin:0 0 1.0vh 0;box-sizing:border-box !important;text-decoration:none;cursor:pointer;width:100%;font-size:4vh;height:10vh;vertical-align:middle;border-top:0.15vh solid #ababab;border-bottom:0.1vh solid #000000;pointer-events:auto !important}.app-selector-link-timer{display:inline-block;width:28vh;height:28vh;z-index:1000;position:fixed;transform:translate(-50%, -50%)}.app-selector-link-timer-progress-bar{stroke-dasharray:296 296;stroke-dashoffset:296;animation:grow 10s linear infinite, fade-in 10s}@keyframes grow{100%{stroke-dashoffset:0}}@keyframes fade-in{0%{opacity:0}20%{opacity:0}50%{opacity:0.5}100%{opacity:0.5}}.log-view{position:fixed;z-index:9989;color:white;background-color:black;top:0;left:0;width:100%;height:100%;display:block;overflow:hidden;font-size:x-large;opacity:0.8}.log-view-minimized{height:45px !important}.log-view-content{padding:15px;overflow-y:scroll;height:90vh;width:100vw;word-wrap:break-word}.maximize-log-button{position:absolute;right:0;top:0;padding:8px;z-index:9989;display:none}.log-button{float:right;padding:8px;margin-right:15px;margin-top:0px}\n',""]);const d=h},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,a,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var l=0;l<this.length;l++){var r=this[l][0];null!=r&&(o[r]=!0)}for(var u=0;u<e.length;u++){var h=[].concat(e[u]);s&&o[h[0]]||(void 0!==n&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=n),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),a&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=a):h[4]="".concat(a)),t.push(h))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var n={},o=[],l=0;l<e.length;l++){var r=e[l],u=s.base?r[0]+s.base:r[0],h=n[u]||0,_="".concat(u," ").concat(h);n[u]=h+1;var d=i(_),c={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};if(-1!==d)t[d].references++,t[d].updater(c);else{var E=a(c,s);s.byIndex=l,t.splice(l,0,{identifier:_,updater:E,references:1})}o.push(_)}return o}function a(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,a){var n=s(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var l=i(n[o]);t[l].references--}for(var r=s(e,a),u=0;u<n.length;u++){var h=i(n[u]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}n=r}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(s){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var a=void 0!==i.layer;a&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,a&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},685:(e,t,i)=>{e.exports=i.p+"b0a0bdae520210e3569b.TTF"}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={id:s,exports:{}};return e[s](n,n.exports,i),n.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.p="",i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{var e=i(379),t=i.n(e),s=i(795),a=i.n(s),n=i(569),o=i.n(n),l=i(565),r=i.n(l),u=i(216),h=i.n(u),_=i(589),d=i.n(_),c=i(551),E={};E.styleTagTransform=d(),E.setAttributes=r(),E.insert=o().bind(null,"head"),E.domAPI=a(),E.insertStyleElement=h();t()(c.Z,E);c.Z&&c.Z.locals&&c.Z.locals;function m(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{r(s.next(e))}catch(t){n(t)}}function l(e){try{r(s.throw(e))}catch(t){n(t)}}function r(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}r((s=s.apply(e,t||[])).next())}))}Object.create;var g,v,p,T,S,b,I,D,y,R,f,A,C,L,w,M;Object.create;class P{static readApplicationSettings(){const e=document.getElementById("application-settings").innerHTML;return JSON.parse(e)}}!function(e){e[e.normal=0]="normal",e[e.overlaybar=1]="overlaybar"}(g||(g={})),function(e){e[e.off=0]="off",e[e.error=1]="error",e[e.warning=2]="warning",e[e.info=3]="info",e[e.verbose=4]="verbose",e[e.debug=5]="debug"}(v||(v={}));class N{static logError(e,...t){this.logLevel>=v.error&&(console.error(e,...t),N._checkAutoRefresh())}static _checkAutoRefresh(){N.autoRefresh&&N._populateLog()}static logWarning(e,...t){N.logLevel>=v.warning&&(console.log(e,...t),N._checkAutoRefresh())}static logInfo(e,...t){N.logLevel>=v.info&&(console.log(e,...t),N._checkAutoRefresh())}static logVerbose(e,...t){N.logLevel>=v.verbose&&(console.log(e,...t),N._checkAutoRefresh())}static logDebug(e,...t){N.logLevel>=v.debug&&(console.log(e,...t),N._checkAutoRefresh())}static initialize(){!0!==N._isInitialized&&(N._isInitialized=!0,document.addEventListener("mousedown",(e=>N._handleStartLogView()),!0),document.addEventListener("keydown",(e=>{N._debugModeActive||e.ctrlKey&&e.altKey&&"l"===e.key&&N.showLogView()})))}static showLogView(){N._debugModeActive=!0;let e=document.querySelector(".log-view-wrapper");null==e&&(e=N._setupLogView()),N._populateLog(),e.style.display="block"}static _closeLog(){N._state=0,N._shortPressCount=0,N._debugModeActive=!1,N.logLevel=v.error;document.querySelector(".log-view-wrapper").style.display="none";document.querySelector(".log-view-content").innerHTML=""}static _clearLog(){globalLogMessages.splice(0),this._populateLog()}static _maximizeLog(){document.querySelector(".log-view").style.display="block";document.querySelector(".maximize-log-button").style.display="none"}static _mimimizeLog(){document.querySelector(".log-view").style.display="none";document.querySelector(".maximize-log-button").style.display="block"}static _setAutoRefreshLog(){const e=document.querySelector(".auto-refresh-log-button");!0===N.autoRefresh?(N.autoRefresh=!1,e.innerText="Turn Auto Refresh On"):(N.autoRefresh=!0,e.innerText="Turn Auto Refresh Off")}static _handleStartLogView(){if(N._debugModeActive)N._lastClick=new Date;else{if(N._durationGreaterThan(3*N._activateDuration,N._lastClick)&&(N._state=0,N._shortPressCount=0),N._state%2!=0&&(N._durationGreaterThan(N._activateDuration,N._lastClick)?N._state++:N._state=0,N._shortPressCount=0),N._state%2==0){if(0===N._shortPressCount&&(N._clickStart=new Date),N._shortPressCount<N._requiredShortPressCount&&N._durationGreaterThan(N._activateDuration,N._clickStart))return N._state=0,void(N._shortPressCount=0);N._shortPressCount++,N._shortPressCount>=N._requiredShortPressCount&&(N._state++,N._clickStart=new Date)}N._lastClick=new Date,N._state>6&&(N._state=0,N._shortPressCount=0,N.showLogView())}}static _durationGreaterThan(e,t){return(new Date).getTime()-t.getTime()>e}static _setupLogView(){const e=document.querySelector("body"),t=document.createElement("div");t.classList.add("log-view-wrapper"),t.innerHTML=`\n        <button class="maximize-log-button">Maximize</button>\n        <div class="log-view">\n            <div class="log-view-toobar">\n            <button class="close-log-button log-button">Exit</button>\n            <button class="clear-log-button log-button">Clear</button>\n            <button class="minimize-log-button log-button">Minimize</button>\n            <button class="refresh-log-button log-button">Refresh</button>\n            <button class="auto-refresh-log-button log-button">${!1===N.autoRefresh?"Turn Auto Refresh On":"Turn Auto Refresh Off"}</button>\n            <select class="log-level-selector log-button">\n                <option value="5" ${N.logLevel===v.debug?"selected":""}>Debug</option>\n                <option value="4" ${N.logLevel===v.verbose?"selected":""}>Verbose</option>\n                <option value="3" ${N.logLevel===v.info?"selected":""}>Info</option>\n                <option value="2" ${N.logLevel===v.warning?"selected":""}>Warning</option>\n                <option value="1" ${N.logLevel===v.error?"selected":""} >Error</option>\n                <option value="0" ${N.logLevel===v.off?"selected":""}>Off</option>\n            </select>\n            </div>\n            <div class="log-view-content">\n            </div>\n        </div>`,e.appendChild(t);document.querySelector(".log-level-selector").onchange=e=>{const t=e.target;N.logLevel=parseInt(t.value,10)};document.querySelector(".close-log-button").onclick=()=>N._closeLog();document.querySelector(".clear-log-button").onclick=()=>N._clearLog();document.querySelector(".minimize-log-button").onclick=()=>N._mimimizeLog();document.querySelector(".maximize-log-button").onclick=()=>N._maximizeLog();document.querySelector(".refresh-log-button").onclick=()=>N._populateLog();return document.querySelector(".auto-refresh-log-button").onclick=()=>N._setAutoRefreshLog(),t}static _populateLog(){const e=document.querySelector(".log-view-content");e.innerHTML="";for(let t=globalLogMessages.length-1;t>=0;t--){const i=globalLogMessages[t],s=document.createElement("div"),a=document.createTextNode(i);s.appendChild(a),e.appendChild(s)}}}N._clickStart=new Date,N._lastClick=new Date,N._isInitialized=!1,N._debugModeActive=!1,N._activateDuration=2e3,N._requiredShortPressCount=3,N._shortPressCount=0,N._state=0,N.logLevel=v.error,N.autoRefresh=!1;class U{static xhrRequest(e,t,i){return new Promise(((s,a)=>{e.open(t,i,!0),e.onload=()=>{e.status>=200&&e.status<400?s(e.response):(N.logError(`Error response from xhrRequest, url: ${i}`,e.statusText),a({status:e.status,statusText:e.statusText}))},e.onerror=t=>{N.logError(e,t),a({status:e.status,statusText:e.statusText})},e.send()}))}static getJsonFile(e){const t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.responseType="json";return U.retryPromise(((i,s)=>{t.open("GET",e,!0),t.onload=()=>{t.status>=200&&t.status<400?i(t.response):(N.logError(`Error loading file ${e}`,t.statusText),s({status:t.status,statusText:t.statusText}))},t.onerror=e=>{N.logError(t,e),s({status:t.status,statusText:t.statusText})},t.send()}),10)}static retryPromise(e,t,i=100){return m(this,void 0,void 0,(function*(){try{return yield new Promise(e)}catch(s){return t>0?(yield new Promise((e=>setTimeout(e,i))),U.retryPromise(e,t-1,i)):(N.logError(`Failed to execute promise, retries left ${t}`),Promise.reject(s))}}))}}class V{static receivedWduHeartbetAckCommand(){return{messagetype:T.acknowledgement,messagecmd:y.acknowledgementAck,size:1,data:[0]}}static requestWduInfoCommand(){return{messagetype:49,messagecmd:1,size:3,data:[0,0,0]}}static requestApplicationSelectorInfoAvailableApplications(e){return{messagetype:49,messagecmd:5,size:0,data:[],extradata:{type:1,clientId:e}}}static applicationSelectorSetDefaultApplication(e,t){return{messagetype:T.systemWrite,messagecmd:7,size:0,data:[],extradata:{type:2,identifiers:e,clientId:t}}}static applicationSelectorClearDefaultApplication(){return{messagetype:T.systemWrite,messagecmd:7,size:0,data:[],extradata:{type:1}}}static momentaryCommand(e,t){return{messagetype:17,messagecmd:1,size:3,data:[e,e>>8,t?1:0]}}static toggleCommand(e,t,i,s){let a=0;return t&&(a|=1),i&&(a|=2),s&&(a|=4),{messagetype:17,messagecmd:0,size:3,data:[e,e>>8,a]}}static dimmerCommand(e,t,i){return{messagetype:17,messagecmd:3,size:5,data:[e,e>>8,i,255&t,t>>8&255]}}}class O{equals(e){return this.signalId===e.signalId&&this.unavailable===e.unavailable&&this.valueTypeIdentifier===e.valueTypeIdentifier&&this.value===e.value}}!function(e){e[e.pulse=0]="pulse",e[e.momentary=1]="momentary",e[e.dimmer=3]="dimmer",e[e.statusUpdate=5]="statusUpdate"}(p||(p={}));class k extends O{equals(e){return this.signalId===e.signalId&&this.unavailable===e.unavailable&&this.valueTypeIdentifier===e.valueTypeIdentifier&&this.value===e.value&&this.type===e.type&&this.onOffStatus===e.onOffStatus&&this.err1FT===e.err1FT&&this.err2UC===e.err2UC&&this.dimmerValue===e.dimmerValue}}!function(e){e[e.mfdStatus=16]="mfdStatus",e[e.mfdControl=17]="mfdControl",e[e.channelInfo=32]="channelInfo",e[e.channelCmd=33]="channelCmd",e[e.systemCmd=48]="systemCmd",e[e.systemReq=49]="systemReq",e[e.systemWrite=50]="systemWrite",e[e.syncCmd=64]="syncCmd",e[e.alertManagement=81]="alertManagement",e[e.nmeaMsg=82]="nmeaMsg",e[e.subscriptionRequest=96]="subscriptionRequest",e[e.clientControlCommand=112]="clientControlCommand",e[e.acknowledgement=128]="acknowledgement"}(T||(T={})),function(e){e[e.serviceProviderHeartbeat=0]="serviceProviderHeartbeat",e[e.wduInfo=1]="wduInfo",e[e.wduSettingsUpdated=4]="wduSettingsUpdated",e[e.wduHeartbeat=5]="wduHeartbeat",e[e.applicationSelection=10]="applicationSelection"}(S||(S={})),function(e){e[e.toggle=0]="toggle",e[e.momentary=1]="momentary",e[e.dimmerUpdate=3]="dimmerUpdate",e[e.statusUpdate=5]="statusUpdate"}(b||(b={})),function(e){e[e.statusUpdate=1]="statusUpdate"}(I||(I={})),function(e){e[e.forceReload=1]="forceReload"}(D||(D={})),function(e){e[e.acknowledgementAck=0]="acknowledgementAck"}(y||(y={})),function(e){e[e.uint32=0]="uint32",e[e.int32=1]="int32",e[e.uint16=2]="uint16",e[e.int16=3]="int16",e[e.uint8=4]="uint8",e[e.int8=5]="int8",e[e.uint64=6]="uint64",e[e.int64=7]="int64",e[e.bit=8]="bit"}(R||(R={}));class F{static start(){this._isStarted||(this._isStarted=!0,window.setInterval((()=>F._incrementTicks()),1e3))}static timestamp(){return F._ticks}static elapsedSeconds(e){return F._ticks-e}static _incrementTicks(){F._ticks++}}F._ticks=0,F._isStarted=!1,function(e){e[e.equal=0]="equal",e[e.notEqual=1]="notEqual",e[e.greaterThan=2]="greaterThan",e[e.lessThan=3]="lessThan",e[e.greaterThanOrEqual=4]="greaterThanOrEqual",e[e.lessThanOrEqual=5]="lessThanOrEqual",e[e.between=6]="between",e[e.notBetween=7]="notBetween",e[e.disabled=8]="disabled"}(f||(f={})),function(e){e[e.forcePageReload=0]="forcePageReload",e[e.settingsUpdated=1]="settingsUpdated",e[e.wduInfoReceived=3]="wduInfoReceived",e[e.checksumReceived=4]="checksumReceived",e[e.applicationSelectionListReceived=5]="applicationSelectionListReceived"}(A||(A={})),function(e){e[e.notSet=0]="notSet",e[e.ok=1]="ok",e[e.noConnectionToDigitalSwitching=2]="noConnectionToDigitalSwitching",e[e.noConnectionToWdu=3]="noConnectionToWdu"}(C||(C={}));class x{constructor(e,t){this.configurationChecksumFromWDU=null,this.watchdogState=C.notSet,this._webSocketManager=null,this._nmeaValueReceivedDelegatesMap=new Map,this._mdfValueReceivedDelegatesMap=new Map,this._onWatchdogStateChangesDelegates=[],this._commandReceivedDelegates=[],this._digitalSwitchingHeartbeatTimestamp=0,this._lastReceivedMessageTimestamp=0,this._oldHeartbeatDurationDivider=0,this._watchdogDuration=2e3,this._protocolVersion=[1,0,0],this._wduInfoReceived=!1,this._receivedNmeaDataMap=new Map,this._receivedMfdDataMap=new Map,this._webSocketManager=e,this._contentDecoder=t,this._webSocketManager.addOnDataReceivedDelegate((e=>this._onMessageReceived(e))),this._lastReceivedMessageTimestamp=F.timestamp(),setTimeout((()=>this._watchdogLoop()),2*this._watchdogDuration)}getProtocolVersion(){return this._protocolVersion}addOnNmeaValueReceivedDelegate(e,t){let i=[];this._nmeaValueReceivedDelegatesMap.has(e)?i=this._nmeaValueReceivedDelegatesMap.get(e):this._nmeaValueReceivedDelegatesMap.set(e,i),i.push(t)}addOnMfdValueReceivedDelegate(e,t){let i=[];this._mdfValueReceivedDelegatesMap.has(e)?i=this._mdfValueReceivedDelegatesMap.get(e):this._mdfValueReceivedDelegatesMap.set(e,i),i.push(t)}addOnCommandReceivedDelegate(e){this._commandReceivedDelegates.push(e)}addWatchdogStateChangedDelegate(e){this._onWatchdogStateChangesDelegates.push(e),e(this.watchdogState)}removeOnWathdogStateChangedDelegate(e){for(let t=0;t<this._onWatchdogStateChangesDelegates.length;t++)if(this._onWatchdogStateChangesDelegates[t]===e)return void this._onWatchdogStateChangesDelegates.splice(t,1)}send(e){this._webSocketManager.sendJson(e)}_notifyMdfValueSubscribers(e){if(!this._isNewMfdData(e))return;const t=this._mdfValueReceivedDelegatesMap.get(e.signalId);if(null!=t)for(const i of t)i(e)}_notifyNmeaValueSubscribers(e){if(!this._isNewNmeaData(e))return;const t=this._nmeaValueReceivedDelegatesMap.get(e.signalId);if(null!=t)for(const i of t)i(e)}_isNewMfdData(e){if(this._receivedMfdDataMap.has(e.signalId)){if(this._receivedMfdDataMap.get(e.signalId).equals(e))return!1}return this._receivedMfdDataMap.set(e.signalId,e),!0}_isNewNmeaData(e){if(this._receivedNmeaDataMap.has(e.signalId)){if(this._receivedNmeaDataMap.get(e.signalId).equals(e))return!1}return this._receivedNmeaDataMap.set(e.signalId,e),!0}_onMessageReceived(e){switch(this._lastReceivedMessageTimestamp=F.timestamp(),e.messagetype){case T.mfdStatus:this._propagateMfdMessage(this._contentDecoder.decodeMFDChannelItem(e));break;case T.nmeaMsg:this._propagateNmeaMessage(this._contentDecoder.decodeN2KDataItem(e));break;case T.systemCmd:if(e.messagecmd===S.wduInfo){this._wduSendsHeartbeat=e.data[0]>1||1===e.data[0]&&e.data[1]>=2,this._protocolVersion[0]=e.data[0],this._protocolVersion[1]=e.data[1],this._wduInfoReceived=!0,N.logVerbose(`WDU Info Received. Enable WDU heartbeat set to ${this._wduSendsHeartbeat}`);for(const e of this._commandReceivedDelegates)e(A.wduInfoReceived)}else if(e.messagecmd===S.serviceProviderHeartbeat){this.configurationChecksumFromWDU=(e.data[1]|e.data[2]<<8|e.data[3]<<16|e.data[4]<<24)>>>0,this._digitalSwitchingHeartbeatTimestamp=F.timestamp(),0!==this.configurationChecksumFromWDU&&this._checkWatchdog();for(const e of this._commandReceivedDelegates)e(A.checksumReceived);N.logVerbose("Service provider heartbeat received")}else if(e.messagecmd===S.wduHeartbeat)N.logDebug("Received wdu heart beat."),this.send(V.receivedWduHeartbetAckCommand());else if(e.messagecmd===S.wduSettingsUpdated)for(const e of this._commandReceivedDelegates)e(A.settingsUpdated);else if(e.messagecmd===S.applicationSelection)for(const t of this._commandReceivedDelegates)t(A.applicationSelectionListReceived,e.extradata);break;case T.clientControlCommand:if(e.messagecmd===D.forceReload){for(const e of this._commandReceivedDelegates)e(A.forcePageReload);setTimeout((()=>{window.location.reload()}),5e3)}}}_propagateMfdMessage(e){if(null==e)return;this._notifyMdfValueSubscribers(e);const t=this._contentDecoder.getVirtualSignals(e.signalId);for(const i of t){const t=new k;t.unavailable=!!e.unavailable||this._evaluate(e.value,i.unAvailableExpression),t.onOffStatus=this._evaluate(e.value,i.statusExpression),t.signalId=i.signalId,t.type=p.momentary,this._notifyMdfValueSubscribers(t)}}_propagateNmeaMessage(e){if(null==e)return;this._notifyNmeaValueSubscribers(e);const t=this._contentDecoder.getVirtualSignals(e.signalId);for(const i of t){const t=new k;t.unavailable=!!e.unavailable||this._evaluate(e.value,i.unAvailableExpression),t.onOffStatus=this._evaluate(e.value,i.statusExpression),t.type=p.momentary,t.signalId=i.signalId,this._notifyMdfValueSubscribers(t)}}_evaluate(e,t){switch(t.expressionType){case f.disabled:return!1;case f.equal:return e===t.valueA;case f.notEqual:return e!==t.valueA;case f.greaterThan:return e>t.valueA;case f.lessThan:return e<t.valueA;case f.greaterThanOrEqual:return e>=t.valueA;case f.lessThanOrEqual:return e<=t.valueA;case f.between:return e>t.valueA&&e<t.valueB;case f.notBetween:return!(e>t.valueA&&e<t.valueB)}}_onWatchdogStateChanged(e){if(this.watchdogState!==e){N.logInfo(`Watchdog state changed to: ${e}`),this.watchdogState=e;for(const t of this._onWatchdogStateChangesDelegates)t(e);this._requestWduInfo()}}_requestWduInfo(){N.logVerbose("Request WDU Info"),this.send(V.requestWduInfoCommand())}_checkWatchdog(){let e=this._watchdogDuration;return this._oldHeartbeatDurationDivider++,F.elapsedSeconds(this._lastReceivedMessageTimestamp)>10?(e=9e3,this._onWatchdogStateChanged(C.noConnectionToWdu),this._webSocketManager.connect(),N.logInfo("No heartbeat from WDU received! Recreate websocket")):this.watchdogState===C.noConnectionToWdu&&this._onWatchdogStateChanged(C.noConnectionToDigitalSwitching),(!this._wduSendsHeartbeat&&this._oldHeartbeatDurationDivider>1&&F.elapsedSeconds(this._lastReceivedMessageTimestamp)>4||!this._wduInfoReceived)&&(N.logVerbose("Send heartbeat for older wdu firmwares"),this._requestWduInfo(),this._oldHeartbeatDurationDivider=0),this.watchdogState!==C.noConnectionToWdu&&(F.elapsedSeconds(this._digitalSwitchingHeartbeatTimestamp)>12?this._onWatchdogStateChanged(C.noConnectionToDigitalSwitching):this._onWatchdogStateChanged(C.ok)),e}_watchdogLoop(){const e=this._checkWatchdog();setTimeout((()=>this._watchdogLoop()),e)}}class H{constructor(e){this._settings=[],this._communicationHandler=null,this._onSettingsChangedDelegate=[],this._communicationHandler=e,this._communicationHandler.addOnCommandReceivedDelegate((e=>this._onCommandReceived(e)))}load(){return m(this,void 0,void 0,(function*(){const e=yield U.getJsonFile("wduSettings.json");this._settings.splice(0,this._settings.length);for(const t of e.Settings)null==t.isExternalSetting&&(t.isExternalSetting=!1),null==t.isOverridden&&(t.isOverridden=!1),this.settings.push(t);for(const t of this._onSettingsChangedDelegate)t()}))}get isLoaded(){return this._settings.length>0}get settings(){return this._settings}getSetting(e){return this._settings.find((t=>t.title===e)).currentSetting.symbol}addOnSettingsReloadedDelegate(e){this._onSettingsChangedDelegate.push(e)}_onCommandReceived(e){if(e===A.settingsUpdated)this.load()}}!function(e){e.language="Language",e.depth="Depth",e.distanceUnit="DistanceUnit",e.fuelEconomyUnit="FuelEconomyUnit",e.height="Height",e.pressure="Pressure",e.atmosphericPressure="AtmosphericPressure",e.speed="Speed",e.temperature="Temperature",e.volume="Volume",e.volumeRate="VolumeRate",e.screensaver="ScreenSaver"}(L||(L={}));class G{constructor(e,t){this._activeLanguage="default",this._applicationSettings=null,this._settingsReader=e,this._applicationSettings=t}initialize(){return m(this,void 0,void 0,(function*(){yield this._parseLanguageData(),this._settingsReader.addOnSettingsReloadedDelegate((()=>this._propagateSettings())),this._settingsReader.isLoaded&&this._propagateSettings()}))}_setActiveLanguage(e){if(this._activeLanguage=e,this._languageResources)for(const t of this._languageResources){const e=document.getElementById(t.elementId);if("img"===e.tagName.toLocaleLowerCase()){e.src=this._getValue(this._activeLanguage,t.resources)}else e.innerText=this._getValue(this._activeLanguage,t.resources)}}_parseLanguageData(){return m(this,void 0,void 0,(function*(){try{const e=this._getResourceFileName();this._languageResources=yield U.getJsonFile(e)}catch(e){}}))}_getResourceFileName(){return this._applicationSettings.type===g.normal?0===this._applicationSettings.index?"index-localization.json":`index-localization${this._applicationSettings.index}.json`:0===this._applicationSettings.index?"overlaybar-localization.json":`overlaybar-localization${this._applicationSettings.index}.json`}_getValue(e,t){let i=t.find((t=>t.languageKey===e));return null==i&&(i=t.find((e=>"default"===e.languageKey))),i.value}_propagateSettings(){this._setActiveLanguage(this._settingsReader.getSetting(L.language))}}!function(e){e[e.DATAITEM_GENERIC_DEC3=0]="DATAITEM_GENERIC_DEC3",e[e.DATAITEM_ABS_ANGLE_M_OR_T_DEC3=1]="DATAITEM_ABS_ANGLE_M_OR_T_DEC3",e[e.DATAITEM_ATMOSPHERIC_PRESSURE_DEC3=2]="DATAITEM_ATMOSPHERIC_PRESSURE_DEC3",e[e.DATAITEM_BEARING_P_OR_S=3]="DATAITEM_BEARING_P_OR_S",e[e.DATAITEM_BEAUFORT=4]="DATAITEM_BEAUFORT",e[e.DATAITEM_CARDINAL_WIND=5]="DATAITEM_CARDINAL_WIND",e[e.DATAITEM_AMPERE_DEC3=6]="DATAITEM_AMPERE_DEC3",e[e.DATAITEM_DATE=7]="DATAITEM_DATE",e[e.DATAITEM_DEPTH=8]="DATAITEM_DEPTH",e[e.DATAITEM_DIMENSIONLESS_DEC3=9]="DATAITEM_DIMENSIONLESS_DEC3",e[e.DATAITEM_DISTANCE_DEC3=10]="DATAITEM_DISTANCE_DEC3",e[e.DATAITEM_FREQUENCY_DEC3=11]="DATAITEM_FREQUENCY_DEC3",e[e.DATAITEM_FUELECONOMY_DEC3=12]="DATAITEM_FUELECONOMY_DEC3",e[e.DATAITEM_HEIGHT_DEC3=13]="DATAITEM_HEIGHT_DEC3",e[e.DATAITEM_PERCENT_DEC3=14]="DATAITEM_PERCENT_DEC3",e[e.DATAITEM_POSITION_DEC3=15]="DATAITEM_POSITION_DEC3",e[e.DATAITEM_PRESSURE_DEC3=16]="DATAITEM_PRESSURE_DEC3",e[e.DATAITEM_RANGEBEARING_DEC3=17]="DATAITEM_RANGEBEARING_DEC3",e[e.DATAITEM_RATEOFTURN_RAD_P_SEC_DEC3=18]="DATAITEM_RATEOFTURN_RAD_P_SEC_DEC3",e[e.DATAITEM_RPM_DEC3=19]="DATAITEM_RPM_DEC3",e[e.DATAITEM_SIGNEDANGLE_RAD_DEC3=20]="DATAITEM_SIGNEDANGLE_RAD_DEC3",e[e.DATAITEM_SPEED_MET_PER_SEC_DEC3=21]="DATAITEM_SPEED_MET_PER_SEC_DEC3",e[e.DATAITEM_TEMPERATURE_KELVIN_DEC3=22]="DATAITEM_TEMPERATURE_KELVIN_DEC3",e[e.DATAITEM_TIME_SEC_DEC3=23]="DATAITEM_TIME_SEC_DEC3",e[e.DATAITEM_TIME_DURATION=24]="DATAITEM_TIME_DURATION",e[e.DATAITEM_TRANSMISSION_GEAR_DEC3=25]="DATAITEM_TRANSMISSION_GEAR_DEC3",e[e.DATAITEM_UNSIGNEDANGLE_RAD_DEC3=26]="DATAITEM_UNSIGNEDANGLE_RAD_DEC3",e[e.DATAITEM_VOLT_DEC3=27]="DATAITEM_VOLT_DEC3",e[e.DATAITEM_CUMETRES_DEC3=28]="DATAITEM_CUMETRES_DEC3",e[e.DATAITEM_VOLUMERATE_CUMS_DEC3=29]="DATAITEM_VOLUMERATE_CUMS_DEC3",e[e.DATAITEM_WINDSPEED_M_PER_S_DEC3=30]="DATAITEM_WINDSPEED_M_PER_S_DEC3",e[e.DF02_ANGLE=102]="DF02_ANGLE",e[e.DF04_ANGLE_SIGNED=104]="DF04_ANGLE_SIGNED",e[e.DF07_CURRENT_ELECTRIC_HIGH=107]="DF07_CURRENT_ELECTRIC_HIGH",e[e.DF09_DISTANCE=109]="DF09_DISTANCE",e[e.DF18_FLOW_RATE_LOW=118]="DF18_FLOW_RATE_LOW",e[e.DF29_PRESSURE=129]="DF29_PRESSURE",e[e.DF35_SPEED_OVER_GROUND=135]="DF35_SPEED_OVER_GROUND",e[e.DF42_VOLTAGE_HIGH=142]="DF42_VOLTAGE_HIGH",e[e.DF100_BATTERY_CAPACITY=200]="DF100_BATTERY_CAPACITY",e[e.DF102_AC_VRMS=202]="DF102_AC_VRMS",e[e.DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION=205]="DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION",e[e.DF106_VOLTAGE=206]="DF106_VOLTAGE",e[e.DF109_DISTANCE_ROUGH=209]="DF109_DISTANCE_ROUGH",e[e.DF120_PERCENT_RESTRICTED_RANGE=220]="DF120_PERCENT_RESTRICTED_RANGE",e[e.DF123_BATTERY_CAPACITY_EXTENDED_RANGE=223]="DF123_BATTERY_CAPACITY_EXTENDED_RANGE",e[e.DF129_TORQUE=229]="DF129_TORQUE",e[e.DF131_POWER_HIGH_RANGE=231]="DF131_POWER_HIGH_RANGE",e[e.DF30_PERCENT_RELATICE_MEASURE=130]="DF30_PERCENT_RELATICE_MEASURE",e[e.DF38_TEMPERATURE_HIGH=138]="DF38_TEMPERATURE_HIGH",e[e.DF39_TEMPERATURE_LOW=139]="DF39_TEMPERATURE_LOW",e[e.DF44_VOLUME=144]="DF44_VOLUME",e[e.DF46_DISTANCE_SIGNED_MEDIUM=146]="DF46_DISTANCE_SIGNED_MEDIUM",e[e.DF47_PRESSURE_MEDIUM=147]="DF47_PRESSURE_MEDIUM",e[e.DF52_BIT_FIELD=152]="DF52_BIT_FIELD",e[e.DF53_INTEGER_8_BIT=153]="DF53_INTEGER_8_BIT",e[e.DF54_INTEGER_16_BIT_UNSIGNED=154]="DF54_INTEGER_16_BIT_UNSIGNED",e[e.DF55_INTEGER_32_BIT=155]="DF55_INTEGER_32_BIT",e[e.DF56_INTEGER_64_BIT=156]="DF56_INTEGER_64_BIT",e[e.DF57_INTEGER_8_BIT_2S_COMPLEMENT=157]="DF57_INTEGER_8_BIT_2S_COMPLEMENT",e[e.DF58_INTEGER_16_BITS_2S_COMPLEMENT=158]="DF58_INTEGER_16_BITS_2S_COMPLEMENT",e[e.DF59_INTEGER_32_BIT_2S_COMPLEMENT=159]="DF59_INTEGER_32_BIT_2S_COMPLEMENT",e[e.DF60_INTEGER_64_BIT_2S_COMPLEMENT=160]="DF60_INTEGER_64_BIT_2S_COMPLEMENT",e[e.DF65_TIME_INTERVAL_STANDARD=165]="DF65_TIME_INTERVAL_STANDARD",e[e.DF67_TIME_INTERVAL_LARGE=167]="DF67_TIME_INTERVAL_LARGE",e[e.DF71_TIME_INTERVAL_MEDIUM=171]="DF71_TIME_INTERVAL_MEDIUM",e[e.DF72_ROTATIONAL_RATE_UNSIGNED=172]="DF72_ROTATIONAL_RATE_UNSIGNED",e[e.DF93_PERCENT_ABSOLUTE=193]="DF93_PERCENT_ABSOLUTE",e[e.DF95_CURRENT_ELECTRIC_HIGH=195]="DF95_CURRENT_ELECTRIC_HIGH",e[e.DF98_TIME_INTERVAL_MEDIUM=198]="DF98_TIME_INTERVAL_MEDIUM"}(w||(w={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ABS_ANGLE_M_OR_T_DEC0=1]="ABS_ANGLE_M_OR_T_DEC0",e[e.AMPERE_DEC0=2]="AMPERE_DEC0",e[e.CUMETRES_DEC0=3]="CUMETRES_DEC0",e[e.CURRENT_DEC0=4]="CURRENT_DEC0",e[e.GALLONS=5]="GALLONS",e[e.IMPERIAL_GALLON=6]="IMPERIAL_GALLON",e[e.DEPTH_METER=7]="DEPTH_METER",e[e.DEPTH_FEET=8]="DEPTH_FEET",e[e.DIMENSIONLESS_DEC0=9]="DIMENSIONLESS_DEC0",e[e.DISTANCE_METERS=10]="DISTANCE_METERS",e[e.DISTANCE_MILES=11]="DISTANCE_MILES",e[e.DISTANCE_KILOMETERS=12]="DISTANCE_KILOMETERS",e[e.DISTANCE_NAUTICAL_FEET=13]="DISTANCE_NAUTICAL_FEET",e[e.DISTANCE_NAUTICAL_METERS=14]="DISTANCE_NAUTICAL_METERS",e[e.FREQUENCY_DEC0=15]="FREQUENCY_DEC0",e[e.FUELECONOMY_KILOMETERS_PER_LITRE=16]="FUELECONOMY_KILOMETERS_PER_LITRE",e[e.FUELECONOMY_MILES_PER_GALLON_US=17]="FUELECONOMY_MILES_PER_GALLON_US",e[e.FUELECONOMY_MILES_PER_GALLON_UK=18]="FUELECONOMY_MILES_PER_GALLON_UK",e[e.FUELECONOMY_NAUTICAL_PER_LITRE=19]="FUELECONOMY_NAUTICAL_PER_LITRE",e[e.FUELECONOMY_NAUTICAL_PER_GALLON_US=20]="FUELECONOMY_NAUTICAL_PER_GALLON_US",e[e.FUELECONOMY_NAUTICAL_PER_GALLON_UK=21]="FUELECONOMY_NAUTICAL_PER_GALLON_UK",e[e.FUELECONOMY_METERS_PER_CUBICMETER=22]="FUELECONOMY_METERS_PER_CUBICMETER",e[e.FUELECONOMY_LITRES_PER_KILOMETER=23]="FUELECONOMY_LITRES_PER_KILOMETER",e[e.FUELECONOMY_LITRES_PER_NAUTICAL=24]="FUELECONOMY_LITRES_PER_NAUTICAL",e[e.FUELECONOMY_LITRES_PER_MILE=25]="FUELECONOMY_LITRES_PER_MILE",e[e.GENERIC_DEC0=26]="GENERIC_DEC0",e[e.HEIGHT_METER=27]="HEIGHT_METER",e[e.HEIGHT_FEET=28]="HEIGHT_FEET",e[e.PRESSURE_KPA=29]="PRESSURE_KPA",e[e.PRESSURE_PSI=30]="PRESSURE_PSI",e[e.PRESSURE_BAR=31]="PRESSURE_BAR",e[e.PERCENT_DEC0=32]="PERCENT_DEC0",e[e.POSITION_DEC0=33]="POSITION_DEC0",e[e.RANGEBEARING_DEC0=34]="RANGEBEARING_DEC0",e[e.RATEOFTURN_RAD_P_SEC_DEC0=35]="RATEOFTURN_RAD_P_SEC_DEC0",e[e.RPM_DEC0=36]="RPM_DEC0",e[e.SIGNEDANGLE_RAD_DEC0=37]="SIGNEDANGLE_RAD_DEC0",e[e.SPEED_MET_PER_SEC_DEC0=38]="SPEED_MET_PER_SEC_DEC0",e[e.SPEED_KNOTS=39]="SPEED_KNOTS",e[e.SPEED_MILES_PER_HOUR=40]="SPEED_MILES_PER_HOUR",e[e.SPEED_KM_PER_HOUR=41]="SPEED_KM_PER_HOUR",e[e.TEMPERATURE_CELCIUS=42]="TEMPERATURE_CELCIUS",e[e.TEMPERATURE_FAHRENHEIT=43]="TEMPERATURE_FAHRENHEIT",e[e.TEMPERATURE_KELVIN=44]="TEMPERATURE_KELVIN",e[e.TIME_SEC_SECOND=45]="TIME_SEC_SECOND",e[e.TIME_DURATION_STRING=46]="TIME_DURATION_STRING",e[e.TRANSMISSION_GEAR_DEC0=47]="TRANSMISSION_GEAR_DEC0",e[e.UNSIGNEDANGLE_RAD_DEC0=48]="UNSIGNEDANGLE_RAD_DEC0",e[e.VOLUMERATE_CUMS_DEC0=49]="VOLUMERATE_CUMS_DEC0",e[e.VOLUMERATE_GALS=50]="VOLUMERATE_GALS",e[e.VOLUMERATE_IMPGALS=51]="VOLUMERATE_IMPGALS",e[e.VOLT_DEC0=52]="VOLT_DEC0",e[e.VOLT_DEC2=53]="VOLT_DEC2",e[e.VOLT_DEC3=54]="VOLT_DEC3",e[e.WINDSPEED_M_PER_S_DEC0=55]="WINDSPEED_M_PER_S_DEC0",e[e.PERCENT_DEC1=56]="PERCENT_DEC1",e[e.WATT_DEC0=57]="WATT_DEC0",e[e.DEGREE_DEC4=58]="DEGREE_DEC4",e[e.NewtonMetersDec1=59]="NewtonMetersDec1",e[e.WATT_DEC1=60]="WATT_DEC1",e[e.DAYS_1970=61]="DAYS_1970"}(M||(M={}));class W{}const B=[{valueType:w.DATAITEM_GENERIC_DEC3,unitLabel:"0.001",defaultValueSubType:M.GENERIC_DEC0,valueSubTypes:[{valueSubType:M.GENERIC_DEC0,unitLabel:"",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_ABS_ANGLE_M_OR_T_DEC3,unitLabel:"0.001 °",defaultValueSubType:M.ABS_ANGLE_M_OR_T_DEC0,valueSubTypes:[{valueSubType:M.ABS_ANGLE_M_OR_T_DEC0,unitLabel:"°",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_BEARING_P_OR_S,unitLabel:"",valueSubTypes:[]},{valueType:w.DATAITEM_BEAUFORT,unitLabel:"",valueSubTypes:[]},{valueType:w.DATAITEM_CARDINAL_WIND,unitLabel:"",valueSubTypes:[]},{valueType:w.DATAITEM_AMPERE_DEC3,unitLabel:"0.001 A",defaultValueSubType:M.AMPERE_DEC0,valueSubTypes:[{valueSubType:M.AMPERE_DEC0,unitLabel:"A",wduSettingsId:"A",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_DATE,unitLabel:"days",defaultValueSubType:M.DAYS_1970,valueSubTypes:[{valueSubType:M.DAYS_1970,unitLabel:"days",wduSettingsId:"days",conversion:e=>e}]},{valueType:w.DATAITEM_DEPTH,unitLabel:"0.001 m",defaultValueSubType:M.DEPTH_METER,valueSubTypes:[{valueSubType:M.DEPTH_METER,unitLabel:"m",wduSettingsId:"m",conversion:e=>e/1e3},{valueSubType:M.DEPTH_FEET,unitLabel:"ft",wduSettingsId:"ft",conversion:e=>e/1e3*3.2808}]},{valueType:w.DATAITEM_DIMENSIONLESS_DEC3,unitLabel:"0.001",defaultValueSubType:M.DIMENSIONLESS_DEC0,valueSubTypes:[{valueSubType:M.DIMENSIONLESS_DEC0,unitLabel:"",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_DISTANCE_DEC3,unitLabel:"0.001 m",defaultValueSubType:M.DISTANCE_KILOMETERS,valueSubTypes:[{valueSubType:M.DISTANCE_METERS,unitLabel:"m",wduSettingsId:"m",conversion:e=>e/1e3},{valueSubType:M.DISTANCE_MILES,unitLabel:"mi",wduSettingsId:"mi",conversion:e=>e/1e3*62137e-8},{valueSubType:M.DISTANCE_KILOMETERS,unitLabel:"km",wduSettingsId:"km",conversion:e=>e/1e6},{valueSubType:M.DISTANCE_NAUTICAL_FEET,unitLabel:"nm, ft",wduSettingsId:"nm, ft",conversion:e=>{const t=e/1e3*.000539956803;return t<1?e/1e3*3.2808399:t}},{valueSubType:M.DISTANCE_NAUTICAL_METERS,unitLabel:"nm, m",wduSettingsId:"nm, m",conversion:e=>{const t=e/1e3*.000539956803;return t<1?e/1e3:t}}]},{valueType:w.DATAITEM_FREQUENCY_DEC3,unitLabel:"0.001 Hz",defaultValueSubType:M.FREQUENCY_DEC0,valueSubTypes:[{valueSubType:M.FREQUENCY_DEC0,unitLabel:"Hz",wduSettingsId:"Hz",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_FUELECONOMY_DEC3,unitLabel:"0.001 km/L",defaultValueSubType:M.FUELECONOMY_KILOMETERS_PER_LITRE,valueSubTypes:[{valueSubType:M.FUELECONOMY_MILES_PER_GALLON_US,unitLabel:"mpg-US",wduSettingsId:"mpg-US",conversion:e=>e/1e3*2.35214583},{valueSubType:M.FUELECONOMY_MILES_PER_GALLON_UK,unitLabel:"mpg-UK",wduSettingsId:"mpg-UK",conversion:e=>e/1e3*2.824810878},{valueSubType:M.FUELECONOMY_NAUTICAL_PER_GALLON_US,unitLabel:"nm/gal-US",wduSettingsId:"nm/gal-US",conversion:e=>e/1e3*2.0439588476982418},{valueSubType:M.FUELECONOMY_NAUTICAL_PER_GALLON_UK,unitLabel:"nm/gal-UK",wduSettingsId:"nm/gal-UK",conversion:e=>e/1e3*2.4546923748152323},{valueSubType:M.FUELECONOMY_NAUTICAL_PER_GALLON_US,unitLabel:"km/gal-US",wduSettingsId:"km/gal-US",conversion:e=>e/264.172052},{valueSubType:M.FUELECONOMY_NAUTICAL_PER_GALLON_UK,unitLabel:"km/gal-UK",wduSettingsId:"km/gal-UK",conversion:e=>e/219.96923465436},{valueSubType:M.FUELECONOMY_METERS_PER_CUBICMETER,unitLabel:"m/m3",wduSettingsId:"m/m3",conversion:e=>e},{valueSubType:M.FUELECONOMY_METERS_PER_CUBICMETER,unitLabel:"m/m3",wduSettingsId:"m/m3",conversion:e=>e},{valueSubType:M.FUELECONOMY_KILOMETERS_PER_LITRE,unitLabel:"km/L",wduSettingsId:"km/L",conversion:e=>e/1e3},{valueSubType:M.FUELECONOMY_KILOMETERS_PER_LITRE,unitLabel:"mi/L",wduSettingsId:"mi/L",conversion:e=>e/1e3*.621371192},{valueSubType:M.FUELECONOMY_NAUTICAL_PER_LITRE,unitLabel:"nm/L",wduSettingsId:"nm/L",conversion:e=>e/1e3*.539956803},{valueSubType:M.FUELECONOMY_LITRES_PER_KILOMETER,unitLabel:"L/km",wduSettingsId:"L/lm",conversion:e=>1e3/e},{valueSubType:M.FUELECONOMY_LITRES_PER_NAUTICAL,unitLabel:"L/nm",wduSettingsId:"L/nm",conversion:e=>1e3/(.539956803*e)},{valueSubType:M.FUELECONOMY_LITRES_PER_MILE,unitLabel:"L/mi",wduSettingsId:"L/mi",conversion:e=>1e3/(.621371192*e)}]},{valueType:w.DATAITEM_HEIGHT_DEC3,unitLabel:"0.001 m",defaultValueSubType:M.HEIGHT_METER,valueSubTypes:[{valueSubType:M.HEIGHT_METER,unitLabel:"m",wduSettingsId:"m",conversion:e=>e/1e3},{valueSubType:M.HEIGHT_FEET,unitLabel:"ft",wduSettingsId:"ft",conversion:e=>e/1e3*3.2808}]},{valueType:w.DATAITEM_PERCENT_DEC3,unitLabel:"0.001 %",defaultValueSubType:M.PERCENT_DEC0,valueSubTypes:[{valueSubType:M.PERCENT_DEC0,unitLabel:"%",wduSettingsId:"%",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_POSITION_DEC3,unitLabel:"0.001",defaultValueSubType:M.POSITION_DEC0,valueSubTypes:[{valueSubType:M.POSITION_DEC0,unitLabel:"",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_PRESSURE_DEC3,unitLabel:"0.001 Pa",defaultValueSubType:M.PRESSURE_KPA,valueSubTypes:[{valueSubType:M.PRESSURE_KPA,unitLabel:"kPa",wduSettingsId:"kPa",conversion:e=>e/1e6},{valueSubType:M.PRESSURE_PSI,unitLabel:"psi",wduSettingsId:"psi",conversion:e=>e/1e3/6894.75729},{valueSubType:M.PRESSURE_BAR,unitLabel:"bar",wduSettingsId:"bar",conversion:e=>e/1e8}]},{valueType:w.DATAITEM_ATMOSPHERIC_PRESSURE_DEC3,unitLabel:"0.001 Pa",defaultValueSubType:M.PRESSURE_KPA,valueSubTypes:[{valueSubType:M.PRESSURE_KPA,unitLabel:"kPa",wduSettingsId:"kPa",conversion:e=>e/1e6},{valueSubType:M.PRESSURE_PSI,unitLabel:"psi",wduSettingsId:"psi",conversion:e=>.000145037738*e},{valueSubType:M.PRESSURE_BAR,unitLabel:"bar",wduSettingsId:"bar",conversion:e=>e/1e5}]},{valueType:w.DATAITEM_RANGEBEARING_DEC3,unitLabel:"0.001",defaultValueSubType:M.RANGEBEARING_DEC0,valueSubTypes:[{valueSubType:M.RANGEBEARING_DEC0,unitLabel:"",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_RATEOFTURN_RAD_P_SEC_DEC3,unitLabel:"0.001 °/s",defaultValueSubType:M.RATEOFTURN_RAD_P_SEC_DEC0,valueSubTypes:[{valueSubType:M.RATEOFTURN_RAD_P_SEC_DEC0,unitLabel:"°/s",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_RPM_DEC3,unitLabel:"0.001 rpm",defaultValueSubType:M.RPM_DEC0,valueSubTypes:[{valueSubType:M.RPM_DEC0,unitLabel:"rpm",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_SIGNEDANGLE_RAD_DEC3,unitLabel:"0.001 °",defaultValueSubType:M.SIGNEDANGLE_RAD_DEC0,valueSubTypes:[{valueSubType:M.SIGNEDANGLE_RAD_DEC0,unitLabel:"°",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_SPEED_MET_PER_SEC_DEC3,unitLabel:"0.001 m/s",defaultValueSubType:M.SPEED_MET_PER_SEC_DEC0,valueSubTypes:[{valueSubType:M.SPEED_MET_PER_SEC_DEC0,unitLabel:"m/s",wduSettingsId:"m/s",conversion:e=>e/1e3},{valueSubType:M.SPEED_KM_PER_HOUR,unitLabel:"km/h",wduSettingsId:"km/h",conversion:e=>e/1e3*3.6},{valueSubType:M.SPEED_KNOTS,unitLabel:"kts",wduSettingsId:"kts",conversion:e=>e/1e3*1.94384449},{valueSubType:M.SPEED_MILES_PER_HOUR,unitLabel:"mph",wduSettingsId:"mph",conversion:e=>e/1e3*2.23693629}]},{valueType:w.DATAITEM_TEMPERATURE_KELVIN_DEC3,unitLabel:"0.001 K",defaultValueSubType:M.TEMPERATURE_KELVIN,valueSubTypes:[{valueSubType:M.TEMPERATURE_KELVIN,unitLabel:"K",wduSettingsId:"K",conversion:e=>e/1e3},{valueSubType:M.TEMPERATURE_CELCIUS,unitLabel:"C",wduSettingsId:"C",conversion:e=>e/1e3-273.15},{valueSubType:M.TEMPERATURE_FAHRENHEIT,unitLabel:"F",wduSettingsId:"F",conversion:e=>e/1e3*1.8-459.67}]},{valueType:w.DATAITEM_TIME_SEC_DEC3,unitLabel:"0.001 s",defaultValueSubType:M.TIME_SEC_SECOND,valueSubTypes:[{valueSubType:M.TIME_SEC_SECOND,unitLabel:"s",wduSettingsId:"s",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_TIME_DURATION,unitLabel:"s",defaultValueSubType:M.TIME_DURATION_STRING,valueSubTypes:[{valueSubType:M.TIME_DURATION_STRING,unitLabel:"",wduSettingsId:"",conversion:e=>{const t=Math.floor(e/86400),i=Math.floor(e%86400/3600),s=Math.floor(e%3600/60);let a="";return a+=t>0?t+"d":"",a+=t>0||i>0?i+"h":"",a+=t>0||i>0||s>0?s+"m":"",a+=Math.floor(e%60)+"s",a}}]},{valueType:w.DATAITEM_TRANSMISSION_GEAR_DEC3,unitLabel:"0.001",defaultValueSubType:M.TRANSMISSION_GEAR_DEC0,valueSubTypes:[{valueSubType:M.TRANSMISSION_GEAR_DEC0,unitLabel:"",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_UNSIGNEDANGLE_RAD_DEC3,unitLabel:"0.001 °",defaultValueSubType:M.UNSIGNEDANGLE_RAD_DEC0,valueSubTypes:[{valueSubType:M.UNSIGNEDANGLE_RAD_DEC0,unitLabel:"°",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_VOLT_DEC3,unitLabel:"0.001 V",defaultValueSubType:M.VOLT_DEC0,valueSubTypes:[{valueSubType:M.VOLT_DEC0,unitLabel:"V",wduSettingsId:"V",conversion:e=>e/1e3}]},{valueType:w.DATAITEM_CUMETRES_DEC3,unitLabel:"0.001 cu m",defaultValueSubType:M.CUMETRES_DEC0,valueSubTypes:[{valueSubType:M.CUMETRES_DEC0,unitLabel:"cu m",wduSettingsId:"cu m",conversion:e=>e/1e3},{valueSubType:M.GALLONS,unitLabel:"gal",wduSettingsId:"gal",conversion:e=>.264172052*e},{valueSubType:M.IMPERIAL_GALLON,unitLabel:"imp gal",wduSettingsId:"imp gal",conversion:e=>.21996924829909*e}]},{valueType:w.DATAITEM_VOLUMERATE_CUMS_DEC3,unitLabel:"0.001 cu-m/s",defaultValueSubType:M.VOLUMERATE_CUMS_DEC0,valueSubTypes:[{valueSubType:M.VOLUMERATE_CUMS_DEC0,unitLabel:"cu-m/s",wduSettingsId:"cu-m/s",conversion:e=>e/1e3},{valueSubType:M.VOLUMERATE_GALS,unitLabel:"gal/s",wduSettingsId:"gal/s",conversion:e=>.264172052*e},{valueSubType:M.VOLUMERATE_IMPGALS,unitLabel:"imp-gal/s",wduSettingsId:"imp-gal/s",conversion:e=>.21996924829909*e}]},{valueType:w.DATAITEM_WINDSPEED_M_PER_S_DEC3,unitLabel:"0.001 m/s",defaultValueSubType:M.WINDSPEED_M_PER_S_DEC0,valueSubTypes:[{valueSubType:M.WINDSPEED_M_PER_S_DEC0,unitLabel:"m/s",wduSettingsId:"",conversion:e=>e/1e3}]},{valueType:w.DF02_ANGLE,unitLabel:"0.0001 rad",defaultValueSubType:M.DEGREE_DEC4,valueSubTypes:[{valueSubType:M.DEGREE_DEC4,unitLabel:"°",wduSettingsId:"",conversion:e=>e/1e4*(180/Math.PI)}]},{valueType:w.DF04_ANGLE_SIGNED,unitLabel:"0.0001 rad",defaultValueSubType:M.DEGREE_DEC4,valueSubTypes:[{valueSubType:M.DEGREE_DEC4,unitLabel:"°",wduSettingsId:"",conversion:e=>e/1e4*(180/Math.PI)}]},{valueType:w.DF07_CURRENT_ELECTRIC_HIGH,unitLabel:"0.1 A",defaultValueSubType:M.CURRENT_DEC0,valueSubTypes:[{valueSubType:M.CURRENT_DEC0,unitLabel:"A",wduSettingsId:"",conversion:e=>e/10}]},{valueType:w.DF09_DISTANCE,unitLabel:"0.01 m",defaultValueSubType:M.DISTANCE_METERS,valueSubTypes:[{valueSubType:M.DISTANCE_METERS,unitLabel:"m",wduSettingsId:"m",conversion:e=>e/100},{valueSubType:M.DISTANCE_MILES,unitLabel:"mi",wduSettingsId:"mi",conversion:e=>e/100*62137e-8},{valueSubType:M.DISTANCE_KILOMETERS,unitLabel:"km",wduSettingsId:"km",conversion:e=>e/1e5},{valueSubType:M.DISTANCE_NAUTICAL_FEET,unitLabel:"nm, ft",wduSettingsId:"nm, ft",conversion:e=>{const t=e/100*.000539956803;return t<1?e/100*3.2808399:t}},{valueSubType:M.DISTANCE_NAUTICAL_METERS,unitLabel:"nm, m",wduSettingsId:"nm, m",conversion:e=>{const t=e/100*.000539956803;return t<1?e/100:t}}]},{valueType:w.DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION,unitLabel:"0.001 K",defaultValueSubType:M.TEMPERATURE_KELVIN,valueSubTypes:[{valueSubType:M.TEMPERATURE_KELVIN,unitLabel:"K",wduSettingsId:"K",conversion:e=>e/1e3},{valueSubType:M.TEMPERATURE_CELCIUS,unitLabel:"C",wduSettingsId:"C",conversion:e=>e/1e3-273.15},{valueSubType:M.TEMPERATURE_FAHRENHEIT,unitLabel:"F",wduSettingsId:"F",conversion:e=>e/1e3*1.8-459.67}]},{valueType:w.DF106_VOLTAGE,unitLabel:"0.1 V",defaultValueSubType:M.VOLT_DEC0,valueSubTypes:[{valueSubType:M.VOLT_DEC0,unitLabel:"V",wduSettingsId:"",conversion:e=>e/10}]},{valueType:w.DF109_DISTANCE_ROUGH,unitLabel:"10 m",defaultValueSubType:M.DEPTH_METER,valueSubTypes:[{valueSubType:M.DEPTH_METER,unitLabel:"m",wduSettingsId:"m",conversion:e=>10*e},{valueSubType:M.DEPTH_FEET,unitLabel:"ft",wduSettingsId:"ft",conversion:e=>10*e*3.2808}]},{valueType:w.DF120_PERCENT_RESTRICTED_RANGE,unitLabel:"0.5 %",defaultValueSubType:M.PERCENT_DEC1,valueSubTypes:[{valueSubType:M.PERCENT_DEC1,unitLabel:"%",wduSettingsId:"",conversion:e=>e/2}]},{valueType:w.DF123_BATTERY_CAPACITY_EXTENDED_RANGE,unitLabel:"0.1 kWh",defaultValueSubType:M.WATT_DEC1,valueSubTypes:[{valueSubType:M.WATT_DEC1,unitLabel:"kWh",wduSettingsId:"",conversion:e=>e/10}]},{valueType:w.DF129_TORQUE,unitLabel:"0.1 Nm",defaultValueSubType:M.NewtonMetersDec1,valueSubTypes:[{valueSubType:M.NewtonMetersDec1,unitLabel:"Nm",wduSettingsId:"",conversion:e=>e/10}]},{valueType:w.DF131_POWER_HIGH_RANGE,unitLabel:"W",defaultValueSubType:M.WATT_DEC0,valueSubTypes:[{valueSubType:M.WATT_DEC0,unitLabel:"W",wduSettingsId:"W",conversion:e=>10*e}]},{valueType:w.DF30_PERCENT_RELATICE_MEASURE,unitLabel:"%",defaultValueSubType:M.PERCENT_DEC0,valueSubTypes:[{valueSubType:M.PERCENT_DEC0,unitLabel:"%",wduSettingsId:"",conversion:e=>e}]},{valueType:w.DF38_TEMPERATURE_HIGH,unitLabel:"0.1 deg K",defaultValueSubType:M.TEMPERATURE_KELVIN,valueSubTypes:[{valueSubType:M.TEMPERATURE_KELVIN,unitLabel:"K",wduSettingsId:"K",conversion:e=>e/10},{valueSubType:M.TEMPERATURE_CELCIUS,unitLabel:"C",wduSettingsId:"C",conversion:e=>e/10-273.15},{valueSubType:M.TEMPERATURE_FAHRENHEIT,unitLabel:"F",wduSettingsId:"F",conversion:e=>e/10*1.8-459.67}]},{valueType:w.DF39_TEMPERATURE_LOW,unitLabel:"0.01 deg K",defaultValueSubType:M.TEMPERATURE_KELVIN,valueSubTypes:[{valueSubType:M.TEMPERATURE_KELVIN,unitLabel:"K",wduSettingsId:"K",conversion:e=>e/100},{valueSubType:M.TEMPERATURE_CELCIUS,unitLabel:"C",wduSettingsId:"C",conversion:e=>e/100-273.15},{valueSubType:M.TEMPERATURE_FAHRENHEIT,unitLabel:"F",wduSettingsId:"F",conversion:e=>e/100*1.8-459.67}]},{valueType:w.DF42_VOLTAGE_HIGH,unitLabel:"0.01 V",defaultValueSubType:M.VOLT_DEC2,valueSubTypes:[{valueSubType:M.VOLT_DEC2,unitLabel:"V",wduSettingsId:"V",conversion:e=>e/100}]},{valueType:w.DF44_VOLUME,unitLabel:"0.001 cu m",defaultValueSubType:M.CUMETRES_DEC0,valueSubTypes:[{valueSubType:M.CUMETRES_DEC0,unitLabel:"cu m",wduSettingsId:"cu m",conversion:e=>e/1e3},{valueSubType:M.GALLONS,unitLabel:"gal",wduSettingsId:"gal",conversion:e=>.264172052*e},{valueSubType:M.IMPERIAL_GALLON,unitLabel:"imp gal",wduSettingsId:"imp gal",conversion:e=>.21996924829909*e}]},{valueType:w.DF47_PRESSURE_MEDIUM,unitLabel:"100 Pa",defaultValueSubType:M.PRESSURE_KPA,valueSubTypes:[{valueSubType:M.PRESSURE_KPA,unitLabel:"kPa",wduSettingsId:"kPa",conversion:e=>100*e/1e3},{valueSubType:M.PRESSURE_PSI,unitLabel:"psi",wduSettingsId:"psi",conversion:e=>100*e*.000145037738},{valueSubType:M.PRESSURE_BAR,unitLabel:"bar",wduSettingsId:"bar",conversion:e=>100*e/1e5}]},{valueType:w.DF65_TIME_INTERVAL_STANDARD,unitLabel:"0.001 s",defaultValueSubType:M.TIME_DURATION_STRING,valueSubTypes:[{valueSubType:M.TIME_DURATION_STRING,unitLabel:"hh:mm",wduSettingsId:"",conversion:e=>{const t=e/1e3,i=Math.floor(t/3600),s=Math.floor(t%3600/60);let a="";return a+=i.toString().padStart(2,"0"),a+=":",a+=s.toString().padStart(2,"0"),a}}]},{valueType:w.DF67_TIME_INTERVAL_LARGE,unitLabel:"1 sec",defaultValueSubType:M.TIME_DURATION_STRING,valueSubTypes:[{valueSubType:M.TIME_DURATION_STRING,unitLabel:"hh:mm",wduSettingsId:"",conversion:e=>{const t=e,i=Math.floor(t/3600),s=Math.floor(t%3600/60);let a="";return a+=i.toString().padStart(2,"0"),a+=":",a+=s.toString().padStart(2,"0"),a}}]},{valueType:w.DF71_TIME_INTERVAL_MEDIUM,defaultValueSubType:M.TIME_DURATION_STRING,unitLabel:"1.0 minute",valueSubTypes:[{valueSubType:M.TIME_DURATION_STRING,unitLabel:"hh:mm",wduSettingsId:"",conversion:e=>{const t=e<0,i=Math.abs(60*e),s=Math.floor(i/3600),a=Math.floor(i%3600/60);let n="";return n+=t?"-":"",n+=Math.abs(s).toString().padStart(2,"0"),n+=":",n+=Math.abs(a).toString().padStart(2,"0"),n}}]},{valueType:w.DF72_ROTATIONAL_RATE_UNSIGNED,unitLabel:"0.25 rpm",defaultValueSubType:M.RPM_DEC0,valueSubTypes:[{valueSubType:M.RPM_DEC0,unitLabel:"rpm",wduSettingsId:"",conversion:e=>Math.floor(e/4)}]},{valueType:w.DF93_PERCENT_ABSOLUTE,unitLabel:"%",defaultValueSubType:M.PERCENT_DEC0,valueSubTypes:[{valueSubType:M.PERCENT_DEC0,unitLabel:"%",wduSettingsId:"",conversion:e=>e}]},{valueType:w.DF95_CURRENT_ELECTRIC_HIGH,unitLabel:"0.1 A",defaultValueSubType:M.AMPERE_DEC0,valueSubTypes:[{valueSubType:M.AMPERE_DEC0,unitLabel:"A",wduSettingsId:"",conversion:e=>e/10}]},{valueType:w.DF98_TIME_INTERVAL_MEDIUM,unitLabel:"1 minute",defaultValueSubType:M.TIME_DURATION_STRING,valueSubTypes:[{valueSubType:M.TIME_DURATION_STRING,unitLabel:"hh:mm",wduSettingsId:"",conversion:e=>{const t=60*e,i=Math.floor(t/3600),s=Math.floor(t%3600/60);let a="";return a+=Math.abs(i).toString().padStart(2,"0"),a+=":",a+=Math.abs(s).toString().padStart(2,"0"),a}}]},{valueType:w.DF18_FLOW_RATE_LOW,unitLabel:"0.0001 cu-m/hr",defaultValueSubType:M.CUMETRES_DEC0,valueSubTypes:[{valueSubType:M.CUMETRES_DEC0,unitLabel:"cu m/s",wduSettingsId:"cu m/s",conversion:e=>e/1e4/3600},{valueSubType:M.GALLONS,unitLabel:"gal/s",wduSettingsId:"gal/s",conversion:e=>e/1e4*264.172052/3600},{valueSubType:M.IMPERIAL_GALLON,unitLabel:"imp gal/s",wduSettingsId:"imp-gal/s",conversion:e=>e/1e4*219.969/3600}]},{valueType:w.DF35_SPEED_OVER_GROUND,unitLabel:"0.01 m/s",defaultValueSubType:M.SPEED_MET_PER_SEC_DEC0,valueSubTypes:[{valueSubType:M.SPEED_MET_PER_SEC_DEC0,unitLabel:"m/s",wduSettingsId:"m/s",conversion:e=>e/100},{valueSubType:M.SPEED_KM_PER_HOUR,unitLabel:"km/h",wduSettingsId:"km/h",conversion:e=>e/100*3.6},{valueSubType:M.SPEED_KNOTS,unitLabel:"kts",wduSettingsId:"kts",conversion:e=>e/100*1.94384},{valueSubType:M.SPEED_MILES_PER_HOUR,unitLabel:"mph",wduSettingsId:"mph",conversion:e=>e/100*2.23693629}]},{valueType:w.DF46_DISTANCE_SIGNED_MEDIUM,unitLabel:"0.001 m",defaultValueSubType:M.DEPTH_FEET,valueSubTypes:[{valueSubType:M.DEPTH_METER,unitLabel:"m",wduSettingsId:"m",conversion:e=>e/1e3},{valueSubType:M.DEPTH_FEET,unitLabel:"ft",wduSettingsId:"ft",conversion:e=>e/1e3*3.2808}]},{valueType:w.DF102_AC_VRMS,unitLabel:"0.001 V",defaultValueSubType:M.VOLT_DEC0,valueSubTypes:[{valueSubType:M.VOLT_DEC0,unitLabel:"V",wduSettingsId:"V",conversion:e=>e/1e3}]},{valueType:w.DF100_BATTERY_CAPACITY,unitLabel:"Ah",defaultValueSubType:M.AMPERE_DEC0,valueSubTypes:[{valueSubType:M.AMPERE_DEC0,unitLabel:"Ah",wduSettingsId:"Ah",conversion:e=>e}]},{valueType:w.DF29_PRESSURE,unitLabel:"1000 Pa",defaultValueSubType:M.PRESSURE_KPA,valueSubTypes:[{valueSubType:M.PRESSURE_KPA,unitLabel:"kPa",wduSettingsId:"kPa",conversion:e=>e},{valueSubType:M.PRESSURE_PSI,unitLabel:"psi",wduSettingsId:"psi",conversion:e=>1e3*e*.000145037738},{valueSubType:M.PRESSURE_BAR,unitLabel:"bar",wduSettingsId:"bar",conversion:e=>1e3*e/1e5}]}];class q{constructor(e){this._selectedConversions=new Map([]),this._settingsReader=e,this._settingsReader.addOnSettingsReloadedDelegate((()=>this._propagateSettings())),this._settingsReader.isLoaded&&this._propagateSettings()}getUnit(e){if(null==e)return"";let t=this._selectedConversions.get(e);return null==t&&(this._setDefaultConversion(e),t=this._selectedConversions.get(e)),t.unitLabel}getConvertedValue(e,t){if(null==t)return e;let i=this._selectedConversions.get(t);return null==i&&(this._setDefaultConversion(t),i=this._selectedConversions.get(t)),i.conversion(e)}_setDefaultConversion(e){const t=B.find((t=>t.valueType===e));let i=M.DEFAULT,s=null;null!=t&&null!=t.defaultValueSubType&&(i=t.defaultValueSubType,s=t.valueSubTypes.find((e=>e.valueSubType===i))),null==s&&(s=this._createNoConversionSubTypeDefinition(i)),this._selectedConversions.set(e,s)}_createNoConversionSubTypeDefinition(e){const t=new W;return t.unitLabel="",t.conversion=e=>e,t.valueSubType=e,t}_propagateSettings(){this._setConversionFromSettingsData(w.DATAITEM_DEPTH,this._settingsReader.getSetting(L.depth)),this._setConversionFromSettingsData(w.DATAITEM_DISTANCE_DEC3,this._settingsReader.getSetting(L.distanceUnit)),this._setConversionFromSettingsData(w.DATAITEM_FUELECONOMY_DEC3,this._settingsReader.getSetting(L.fuelEconomyUnit)),this._setConversionFromSettingsData(w.DATAITEM_HEIGHT_DEC3,this._settingsReader.getSetting(L.height)),this._setConversionFromSettingsData(w.DATAITEM_PRESSURE_DEC3,this._settingsReader.getSetting(L.pressure)),this._setConversionFromSettingsData(w.DATAITEM_ATMOSPHERIC_PRESSURE_DEC3,this._settingsReader.getSetting(L.atmosphericPressure)),this._setConversionFromSettingsData(w.DATAITEM_SPEED_MET_PER_SEC_DEC3,this._settingsReader.getSetting(L.speed)),this._setConversionFromSettingsData(w.DATAITEM_TEMPERATURE_KELVIN_DEC3,this._settingsReader.getSetting(L.temperature)),this._setConversionFromSettingsData(w.DF38_TEMPERATURE_HIGH,this._settingsReader.getSetting(L.temperature)),this._setConversionFromSettingsData(w.DF39_TEMPERATURE_LOW,this._settingsReader.getSetting(L.temperature)),this._setConversionFromSettingsData(w.DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION,this._settingsReader.getSetting(L.temperature)),this._setConversionFromSettingsData(w.DATAITEM_CUMETRES_DEC3,this._settingsReader.getSetting(L.volume)),this._setConversionFromSettingsData(w.DF18_FLOW_RATE_LOW,this._settingsReader.getSetting(L.volumeRate)),this._setConversionFromSettingsData(w.DATAITEM_VOLUMERATE_CUMS_DEC3,this._settingsReader.getSetting(L.volumeRate)),this._setConversionFromSettingsData(w.DF44_VOLUME,this._settingsReader.getSetting(L.volume)),this._setConversionFromSettingsData(w.DF47_PRESSURE_MEDIUM,this._settingsReader.getSetting(L.pressure)),this._setConversionFromSettingsData(w.DF09_DISTANCE,this._settingsReader.getSetting(L.distanceUnit)),this._setConversionFromSettingsData(w.DF109_DISTANCE_ROUGH,this._settingsReader.getSetting(L.depth)),this._setConversionFromSettingsData(w.DF35_SPEED_OVER_GROUND,this._settingsReader.getSetting(L.speed)),this._setConversionFromSettingsData(w.DF46_DISTANCE_SIGNED_MEDIUM,this._settingsReader.getSetting(L.depth)),this._setConversionFromSettingsData(w.DF29_PRESSURE,this._settingsReader.getSetting(L.pressure))}_setConversionFromSettingsData(e,t){const i=B.find((t=>t.valueType===e));if(null!=i){const s=i.valueSubTypes.find((e=>e.wduSettingsId===t));null!=s&&this._selectedConversions.set(e,s)}}}var z,K,Y,$,j,X;!function(e){e[e.notSet=0]="notSet",e[e.closed=1]="closed",e[e.connecting=2]="connecting",e[e.open=3]="open",e[e.socketError=4]="socketError"}(z||(z={}));class J{constructor(){this.currentState=z.notSet,this.autoReconnectOnError=!1,this._webSocket=null,this._onMessageDelegates=[],this._onSocketStateChangesDelegates=[]}connect(){this._createNewWebSocket()}addOnDataReceivedDelegate(e){this._onMessageDelegates.push(e)}removeOnDataReceivedDelegate(e){for(let t=0;t<this._onMessageDelegates.length;t++)if(this._onMessageDelegates[t]===e)return void this._onMessageDelegates.splice(t,1)}addOnSocketStateChangedDelegate(e){this._onSocketStateChangesDelegates.push(e),e(this.currentState)}removeOnSocketStateChangedDelegate(e){for(let t=0;t<this._onSocketStateChangesDelegates.length;t++)if(this._onSocketStateChangesDelegates[t]===e)return void this._onSocketStateChangesDelegates.splice(t,1)}sendJson(e){this.send(JSON.stringify(e))}send(e){null==this._webSocket||this._webSocket.readyState!==this._webSocket.OPEN?N.logWarning("Websocket is not open, failed to send command!"):(N.logDebug("Sending ws data: ",e),this._webSocket.send(e))}_createNewWebSocket(){if(null!=this._webSocket)try{this._webSocket.readyState!==this._webSocket.OPEN&&this._webSocket.readyState!==this._webSocket.CONNECTING||this._webSocket.close(),this._onSocketClosed()}catch(e){}this._webSocket=new WebSocket("ws://"+window.location.host+"/ws"),this._webSocket.onopen=e=>this._onOpen(e),this._webSocket.onmessage=e=>this._onMessageReceived(e),this._webSocket.onerror=e=>this._onSocketError(e),this._webSocket.onclose=e=>this._onSocketClosed(),this._onSocketStateChanged(z.connecting)}_onMessageReceived(e){const t=JSON.parse(e.data);if(null!=t){N.logDebug(`Received ws data. cmd: ${t.messagecmd}, type: ${t.messagetype}, size: ${t.size}`);for(const e of this._onMessageDelegates)e(t)}else N.logDebug("Received ws data with value null")}_onSocketError(e){N.logError("Websocket return onError, socket state: "+this._webSocket.readyState),this._onSocketStateChanged(z.socketError),this.autoReconnectOnError&&(N.logWarning("Websocket error: Recreate websocket"),this._createNewWebSocket())}_onSocketClosed(){this._onSocketStateChanged(z.closed)}_onOpen(e){this._onSocketStateChanged(z.open)}_onSocketStateChanged(e){this.currentState=e,this._notifySocketStateSubscribers(e)}_notifySocketStateSubscribers(e){for(const t of this._onSocketStateChangesDelegates)t(e)}}class Q{static hideElement(e){null!=e&&e.classList.add("hidden")}static showElement(e){null!=e&&e.classList.remove("hidden")}static setElementVisibility(e,t){null!=e&&(!0===t?this.showElement(e):this.hideElement(e))}static debounce(e,t,i){let s;return()=>{const a=this,n=arguments,o=i&&!s;clearTimeout(s),s=setTimeout((()=>{s=null,i||e.apply(a,n)}),t),o&&e.apply(a,n)}}}class Z{static round(e,t){const i=(e,t,i)=>{i&&(t=-t);const s=(""+e).split("e");return+(s[0]+"e"+(s[1]?+s[1]+t:t))};return i(Math.round(i(e,t,!1)),t,!0)}static parseBooleanArgument(e){return void 0!==e&&("boolean"==typeof e?e:"string"==typeof e&&"true"===e.toLowerCase())}static clamp(e,t,i){return e>i?i:e<t?t:e}}!function(e){e[e.hidden=0]="hidden",e[e.visible=1]="visible"}(K||(K={}));class ee{constructor(e,t){this.isUnavailable=!1,this._mfdSignalId=parseInt(t.dataset.ebpSignalId,10),this._nmeaSignalId=parseInt(t.dataset.nmeaSignalId,10),this.communicationHandler=e,isNaN(this._mfdSignalId)||this.communicationHandler.addOnMfdValueReceivedDelegate(this._mfdSignalId,(e=>this._onMfdDataReceived(e))),isNaN(this._nmeaSignalId)||this.communicationHandler.addOnNmeaValueReceivedDelegate(this._nmeaSignalId,(e=>this._onNmeaDataReceived(e)))}onMfdDataReceived(e){}onNmeaDataReceived(e){}_onNmeaDataReceived(e){this.onNmeaDataReceived(e)}_onMfdDataReceived(e){this.allowSignalTypes().length>0&&!this.allowSignalTypes().includes(e.type)||(this.isUnavailable!==e.unavailable&&(this.isUnavailable=e.unavailable,this.onUnavailableChanged(),this.evaluateVisibility()),this.onMfdDataReceived(e))}get mfdSignalId(){return this._mfdSignalId}get nmeaSignalId(){return this._nmeaSignalId}}class te extends ee{constructor(e,t){super(t,e),this.hideOnServiceUnavailable=!1,this._isVisible=null,this._visibility=null,this.element=e}initialize(){this.hideOnServiceUnavailable=Z.parseBooleanArgument(this.element.dataset.hideOnServiceUnavailable),this.onInitialize()}setVisibility(e){e!==this._visibility&&(this._visibility=e,this.evaluateVisibility())}refresh(){this._visibility&&this.onRedraw()}onVisibilityChanged(e){}onUnavailableChanged(){}evaluateVisibility(){const e=this._visibility===K.visible&&!(this.isUnavailable&&this.hideOnServiceUnavailable);e!==this._isVisible&&(this._isVisible=e,Q.setElementVisibility(this.element,e),this.onVisibilityChanged(e),this.refresh())}}class ie extends te{constructor(e,t){super(e,t),this._value=0,this._position=0,this._wrapAroundPosition=0,this._valueReceived=!1,this.element.classList.add("notransition")}get currentValue(){return this._value}get currentPosition(){return this._position}get startPosition(){return this._startPosition}get endPosition(){return this._endPosition}get counterClockwise(){return this._counterClockwise}allowSignalTypes(){return[p.statusUpdate]}onRedraw(){null!=this._overlayImage&&(this._wrapAround?(this._wrapAroundPosition=this._closestEquivalentAngle(this._wrapAroundPosition,this._position+this._startPosition),this._overlayImage.style.transform=`rotate(${this._wrapAroundPosition-this._startPosition}deg) translateZ(0px)`):this._overlayImage.style.transform=`rotate(${this._position}deg) translateZ(0px)`,this._removeNoTransitionOnNextRedraw&&this._valueReceived&&(setTimeout((()=>{this.element.classList.remove("notransition")}),0),this._removeNoTransitionOnNextRedraw=!1))}onVisibilityChanged(e){e?this._removeNoTransitionOnNextRedraw=!0:this.element.classList.add("notransition")}onMfdDataReceived(e){this._updateValue(e.value,e.valueTypeIdentifier)}onNmeaDataReceived(e){this._updateValue(e.value,e.valueTypeIdentifier)}onInitialize(){this._parseAttributes(),this._setDomElements(),this._addAnimationStyle(),this._positionRange=this._endPosition-this._startPosition,this._valueRange=this._maxValue-this._minValue,this._counterClockwise=this._endPosition<this._startPosition,this._position=this._startPosition,window.addEventListener("resize",(()=>{this.refresh()}))}_setDomElements(){this._overlayImage=this.element.querySelector(".gauge-overlay")}_addAnimationStyle(){this._disableAnimation||this._overlayImage.classList.add("gauge-animation")}_parseAttributes(){this._minValue=parseInt(this.element.dataset.minValue,10),this._maxValue=parseInt(this.element.dataset.maxValue,10),this._startPosition=parseInt(this.element.dataset.startPosition,10),this._endPosition=parseInt(this.element.dataset.endPosition,10),this._wrapAround=Z.parseBooleanArgument(this.element.dataset.wrapAround),this._disableAnimation=Z.parseBooleanArgument(this.element.dataset.disableAnimation)}_updateValue(e,t){this._valueReceived=!0,this._value=Z.clamp(e,this._minValue,this._maxValue);const i=(this._value-this._minValue)/this._valueRange;this._position=this._positionRange*i+this._startPosition,this.refresh()}_closestEquivalentAngle(e,t){return e+(((t-e)%360+540)%360-180)}}class se extends te{constructor(e,t){super(e,t),this._error1=!1,this._error2=!1,this._on=!1,this._pressed=!1}onRedraw(){this._stackImages?(Q.showElement(this._imgOff),Q.setElementVisibility(this._imgOn,this._on),Q.setElementVisibility(this._imgError12,this._error1&&this._error2),Q.setElementVisibility(this._imgError1,this._error1),Q.setElementVisibility(this._imgError2,this._error2),Q.setElementVisibility(this._imgNotAvailable,this.isUnavailable)):(Q.hideElement(this._imgOff),Q.hideElement(this._imgOn),Q.hideElement(this._imgError1),Q.hideElement(this._imgError2),Q.hideElement(this._imgError12),Q.hideElement(this._imgNotAvailable),this.isUnavailable?Q.showElement(this._imgNotAvailable):this._error1&&this._error2?Q.showElement(this._imgError12):this._error1?Q.showElement(this._imgError1):this._error2?Q.showElement(this._imgError2):this._on?Q.showElement(this._imgOn):Q.showElement(this._imgOff)),this._pressed&&!this.isUnavailable?Q.showElement(this._imgPressed):Q.hideElement(this._imgPressed)}allowSignalTypes(){return[p.pulse,p.momentary]}onMfdDataReceived(e){this._error1=e.err1FT,this._error2=e.err2UC,this._on=e.onOffStatus,this.refresh()}onVisibilityChanged(e){this._pressed&&!e&&this.buttonUp()}onUnavailableChanged(){this._pressed&&this.isUnavailable&&this.buttonUp()}onInitialize(){this._isMomentaryButton="SendMomentary"===this.element.dataset.function,this._stackImages=Z.parseBooleanArgument(this.element.dataset.stackImages),this._imgOff=this.element.querySelector("img.button-off"),this._imgOn=this.element.querySelector("img.button-on"),this._imgError1=this.element.querySelector("img.button-error1"),this._imgError2=this.element.querySelector("img.button-error2"),this._imgError12=this.element.querySelector("img.button-error12"),this._imgNotAvailable=this.element.querySelector("img.button-notavailable"),this._imgPressed=this.element.querySelector("img.button-pressed"),this._globalMouseUpEvent=e=>(this.buttonUp(),e.preventDefault(),!1),this._registerEvents()}buttonDown(e){this.isUnavailable||(this._pressed=!0,"mousedown"===e.type&&document.addEventListener("mouseup",this._globalMouseUpEvent),this.refresh(),this._isMomentaryButton?this.communicationHandler.send(V.momentaryCommand(this.mfdSignalId,!0)):this.communicationHandler.send(V.toggleCommand(this.mfdSignalId,!0,!this._on,!!this._on)))}buttonUp(){document.removeEventListener("mouseup",this._globalMouseUpEvent),this._isMomentaryButton&&this._pressed&&this.communicationHandler.send(V.momentaryCommand(this.mfdSignalId,!1)),this._pressed=!1,this.refresh()}_registerEvents(){["mousedown","touchstart"].forEach((e=>this.element.addEventListener(e,(e=>(this.buttonDown(e),e.preventDefault(),e.stopPropagation(),!1))))),["mouseup","touchend","touchcancel"].forEach((e=>this.element.addEventListener(e,(e=>(this.buttonUp(),e.preventDefault(),!1)))))}}class ae extends te{constructor(e,t){super(e,t),this._currentValue=0,this._valueReceived=!1}get currentValue(){return this._currentValue}get currentLevelRatio(){return this._currentLevelRatio}get minHeigtRatio(){return this._minHeightRatio}get maxHeigtRatio(){return this._maxHeightRatio}allowSignalTypes(){return[p.statusUpdate]}onRedraw(){null!=this._thresholdLowValue&&this._thresholdLowValue>=this._currentValue?(Q.hideElement(this._levelImage),Q.showElement(this._levelImageLowThreshold),Q.hideElement(this._levelImageHighThreshold),Q.hideElement(this._levelTrackerImage),Q.showElement(this._levelTrackerImageLowThreshold),Q.hideElement(this._levelTrackerImageHighThreshold)):null!=this._thresholdHighValue&&this._thresholdHighValue<=this._currentValue?(Q.hideElement(this._levelImage),Q.hideElement(this._levelImageLowThreshold),Q.showElement(this._levelImageHighThreshold),Q.hideElement(this._levelTrackerImage),Q.hideElement(this._levelTrackerImageLowThreshold),Q.showElement(this._levelTrackerImageHighThreshold)):(Q.showElement(this._levelImage),Q.hideElement(this._levelImageLowThreshold),Q.hideElement(this._levelImageHighThreshold),Q.showElement(this._levelTrackerImage),Q.hideElement(this._levelTrackerImageLowThreshold),Q.hideElement(this._levelTrackerImageHighThreshold)),this._resolveCurrentHeightsAndWidths();const e=this._elementHeight-(this._currentLevelRatio-this._minHeightRatio)*this._elementHeight;if(null!=this._levelDiv&&(this._levelDiv.style.clip=`rect(${e}px, ${this._elementWidth}px, ${this._elementHeight}px, 0px)`),null!=this._levelTrackerImage){const e=`${this._currentLevelRatio*this._elementHeight-this._trackerHeight/2}px`,t=this._elementWidth/2-this._trackerWidth/2+"px";this._levelTrackerImage.style.bottom=e,this._levelTrackerImage.style.left=t}if(null!=this._levelTrackerImageLowThreshold){const e=`${this._currentLevelRatio*this._elementHeight-this._trackerLowThresholdHeight/2}px`,t=this._elementWidth/2-this._trackerLowThresholdWidth/2+"px";this._levelTrackerImageLowThreshold.style.bottom=e,this._levelTrackerImageLowThreshold.style.left=t}if(null!=this._levelTrackerImageHighThreshold){const e=`${this._currentLevelRatio*this._elementHeight-this._trackerHighThresholdHeight/2}px`,t=this._elementWidth/2-this._trackerHighThresholdWidth/2+"px";this._levelTrackerImageHighThreshold.style.bottom=e,this._levelTrackerImageHighThreshold.style.left=t}this._removeNoTransitionOnNextRedraw&&this._valueReceived&&(setTimeout((()=>{this.element.classList.remove("notransition")}),0),this._removeNoTransitionOnNextRedraw=!1)}onVisibilityChanged(e){e?this._removeNoTransitionOnNextRedraw=!0:this.element.classList.add("notransition")}onMfdDataReceived(e){this._calculateValues(e.value),this.refresh()}onNmeaDataReceived(e){this._calculateValues(e.value),this.refresh()}onInitialize(){this._parseHtmlAttributes(),this.setDomElements(),this._addAnimationStyle(),this._resolveCurrentHeightsAndWidths(),window.addEventListener("resize",(()=>this.refresh()))}setDomElements(){this._levelDiv=this.element.querySelector(".levelgauge-level"),this._levelImage=this.element.querySelector(".levelgauge-levelimage"),this._levelImageLowThreshold=this.element.querySelector(".levelgauge-levelimage-low-threshold"),this._levelImageHighThreshold=this.element.querySelector(".levelgauge-levelimage-high-threshold"),this._levelTrackerImage=this.element.querySelector(".levelgauge-leveltrackerimage"),this._levelTrackerImageLowThreshold=this.element.querySelector(".levelgauge-leveltrackerimage-low-threshold"),this._levelTrackerImageHighThreshold=this.element.querySelector(".levelgauge-leveltrackerimage-high-threshold")}_addAnimationStyle(){var e,t,i,s,a,n,o;this._disableAnimation||(null===(e=this._levelDiv)||void 0===e||e.classList.add("levelgauge-animation"),null===(t=this._levelImage)||void 0===t||t.classList.add("levelgauge-leveltracker-animation"),null===(i=this._levelTrackerImage)||void 0===i||i.classList.add("levelgauge-leveltracker-animation"),null===(s=this._levelTrackerImageHighThreshold)||void 0===s||s.classList.add("levelgauge-leveltracker-animation"),null===(a=this._levelTrackerImageLowThreshold)||void 0===a||a.classList.add("levelgauge-leveltracker-animation"),null===(n=this._levelImageHighThreshold)||void 0===n||n.classList.add("levelgauge-leveltracker-animation"),null===(o=this._levelImageLowThreshold)||void 0===o||o.classList.add("levelgauge-leveltracker-animation"))}_parseHtmlAttributes(){if(this._minValue=parseInt(this.element.dataset.minValue,10),this._maxValue=parseInt(this.element.dataset.maxValue,10),this._minHeightRatio=.01*parseInt(this.element.dataset.minHeight,10),this._maxHeightRatio=.01*parseInt(this.element.dataset.maxHeight,10),this._maxHeightRatio<this._minHeightRatio){const e=this._minHeightRatio;this._minHeightRatio=this._maxHeightRatio,this._maxHeightRatio=e}this._currentLevelRatio=this._minHeightRatio,this._thresholdLowValue=parseInt(this.element.dataset.thresholdLowValue,10),this._thresholdHighValue=parseInt(this.element.dataset.thresholdHighValue,10),this._disableAnimation=Z.parseBooleanArgument(this.element.dataset.disableAnimation)}_resolveCurrentHeightsAndWidths(){this._elementHeight=parseFloat(getComputedStyle(this.element).getPropertyValue("height")),this._elementWidth=parseFloat(getComputedStyle(this.element).getPropertyValue("width")),null!=this._levelTrackerImage&&(this._trackerHeight=parseFloat(getComputedStyle(this._levelTrackerImage).getPropertyValue("height")),this._trackerWidth=parseFloat(getComputedStyle(this._levelTrackerImage).getPropertyValue("width"))),null!=this._levelTrackerImageLowThreshold&&(this._trackerLowThresholdHeight=parseFloat(getComputedStyle(this._levelTrackerImageLowThreshold).getPropertyValue("height")),this._trackerLowThresholdWidth=parseFloat(getComputedStyle(this._levelTrackerImageLowThreshold).getPropertyValue("width"))),null!=this._levelTrackerImageHighThreshold&&(this._trackerHighThresholdHeight=parseFloat(getComputedStyle(this._levelTrackerImageHighThreshold).getPropertyValue("height")),this._trackerHighThresholdWidth=parseFloat(getComputedStyle(this._levelTrackerImageHighThreshold).getPropertyValue("width")))}_calculateValues(e){this._valueReceived=!0;let t=this._maxValue,i=this._minValue;this._maxValue<this._minValue&&(t=this._minValue,i=this._maxValue);let s=Z.clamp(e,i,t);this._currentValue=s,this._maxValue<this._minValue&&(s=t-s);const a=this._maxHeightRatio-this._minHeightRatio,n=(s-i)/Math.abs(this._maxValue-this._minValue);this._currentLevelRatio=n*a+this._minHeightRatio}}class ne extends te{constructor(e,t){super(e,t)}allowSignalTypes(){return[]}onRedraw(){}onInitialize(){}}!function(e){e[e.doNothing=0]="doNothing",e[e.show=1]="show",e[e.hide=2]="hide",e[e.toggle=3]="toggle"}(Y||(Y={}));class oe{static fromJson(e){const t=e.s;return new oe(e.l,t)}constructor(e,t){this.action=Y.doNothing,this.layerId=e,this.action=t}}class le extends te{constructor(e,t,i){super(e,t),this._holdDownTimeout=null,this._layerActions=null,this._pageNavigator=i}onRedraw(){Q.setElementVisibility(this._elementImagePressed,this._pressed)}allowSignalTypes(){return[]}onInitialize(){if(this._elementImagePressed=this.element.querySelector(".navigationbutton-imagepressed"),this._destinationSystemPage=this.element.dataset.destinationSystemPage,void 0!==this._destinationSystemPage?this._usesPageNavigation=!1:(this._usesPageNavigation=!0,this._destinationPageId=this.element.dataset.destinationPageId),this._requireHoldDownButtonSeconds=parseInt(this.element.dataset.requireHoldDownButtonSeconds,10),null==this._requireHoldDownButtonSeconds&&(this._requireHoldDownButtonSeconds=0),this.element.dataset.layerActions){const e=JSON.parse(this.element.dataset.layerActions);Array.isArray(e)&&(this._layerActions=e.map((e=>oe.fromJson(e))))}this._globalMouseUpEvent=e=>(this.buttonUp(e),e.preventDefault(),!1),this.registerEvents()}registerEvents(){["mousedown","touchstart"].forEach((e=>this.element.addEventListener(e,(e=>(this.buttonDown(e),e.preventDefault(),e.stopPropagation(),!1))))),["mouseup","touchend","touchcancel"].forEach((e=>this.element.addEventListener(e,(e=>(this.buttonUp(e),e.preventDefault(),!1)))))}buttonDown(e){this.isUnavailable||(this._pressed=!0,"mousedown"===e.type&&document.addEventListener("mouseup",this._globalMouseUpEvent),this.refresh(),this._requireHoldDownButtonSeconds>0&&(this._holdDownTimeout=setTimeout(this.triggerClickAfterHoldDown.bind(this),1e3*this._requireHoldDownButtonSeconds)))}buttonUp(e){if(document.removeEventListener("mouseup",this._globalMouseUpEvent),null!=this._holdDownTimeout)return clearTimeout(this._holdDownTimeout),this._holdDownTimeout=null,this._pressed=!1,void this.refresh();this.isUnavailable||this._pressed&&(this.onClick(),this._pressed=!1,this.refresh())}onClick(){this._usesPageNavigation?(this._navigateToPage(),this._executeLayerActions()):this._pageNavigator.setActiveExternalPage(this._destinationSystemPage)}_executeLayerActions(){if(null!=this._layerActions)for(const e of this._layerActions){const t=this._pageNavigator.getActivePage();if(null!=t){const i=t.getLayer(e.layerId);this._updateLayerState(e.action,i)}}}_navigateToPage(){null!=!this._destinationPageId&&0!==this._destinationPageId.length&&this._pageNavigator.setActivePageById(this._destinationPageId)}_updateLayerState(e,t){if(e===Y.doNothing)return;if(e===Y.show&&t.visible||e===Y.hide&&!t.visible)return;const i=e===Y.toggle?!t.visible:!(e===Y.hide);t.visible=i}triggerClickAfterHoldDown(){this._pressed&&(this.onClick(),this._pressed=!1,this.refresh())}}class re extends te{constructor(e,t,i,s){super(e,t),this._value=0,this._on=!1,this._signalType=p.statusUpdate,this._valueConverter=null,this._valueElement=null,this._unitElement=null,this._magnitudeConverter=null,this._valueConverter=i,this._magnitudeConverter=s}allowSignalTypes(){return[p.statusUpdate,p.dimmer]}onMfdDataReceived(e){e.type===p.statusUpdate?(this._valueType=e.valueTypeIdentifier,this._value=e.value):(this._valueType=w.DATAITEM_GENERIC_DEC3,this._on=e.onOffStatus,this._value=100*e.dimmerValue),this.refresh()}onNmeaDataReceived(e){this._value=e.value,this._valueType=e.valueTypeIdentifier,this.isUnavailable=e.unavailable,this.refresh()}onRedraw(){if(this.isUnavailable)return void this.drawIsUnavailable();const e=this._valueConverter.getConvertedValue(this._value,this._valueType);let t=e;if(this._signalType!==p.dimmer||this._on||"value"===this._offValue)if(null==this._decimalPlaces||isNaN(t))this._valueElement.textContent=e.toString();else{t=this._magnitudeConverter.getConvertedValue(t,this._magnitudeConversion);const e=this.formatter.format(t);this._valueElement.textContent=e}else this._drawOffValue();if(this._showUnit){const e=this._valueConverter.getUnit(this._valueType);this._unitElement.textContent=" "+e}this._signalType!==p.dimmer||this._on?null!=this._thresholdLowValue&&this._thresholdLowValue>=this._value?(this.element.classList.add("threshold-low"),this.element.classList.remove("threshold-high")):null!=this._thresholdHighValue&&this._thresholdHighValue<=this._value?(this.element.classList.remove("threshold-low"),this.element.classList.add("threshold-high")):(this.element.classList.remove("threshold-low"),this.element.classList.remove("threshold-high"),this.element.classList.remove("status-off")):(this.element.classList.add("status-off"),this.element.classList.remove("threshold-low"),this.element.classList.remove("threshold-high"))}onInitialize(){this._formatMode=this.element.dataset.formatMode,this._formatSetting=parseInt(this.element.dataset.formatSetting,10),this._decimalPlaces=parseInt(this.element.dataset.decimalPlaces,10),this._showUnit=Z.parseBooleanArgument(this.element.dataset.showUnit),this._thresholdLowValue=parseInt(this.element.dataset.thresholdLowValue,10),this._thresholdHighValue=parseInt(this.element.dataset.thresholdHighValue,10),this._notAvailableValue=this.element.dataset.notAvailableValue,this._offValue=this.element.dataset.offValue,this._signalType=parseInt(this.element.dataset.signalType,10),this._magnitudeConversion=parseFloat(this.element.dataset.magnitudeConversion.replace(",",".")),this._valueElement=this.element.querySelector(".value"),this._unitElement=this.element.querySelector(".unit"),this.formatter=this._createTextFormatter()}drawIsUnavailable(){if(this.element.classList.remove("threshold-low"),this.element.classList.remove("threshold-high"),"zero"===this._notAvailableValue)if(this._valueElement.textContent=this.formatter.format(0),this._showUnit){const e=this._valueConverter.getUnit(this._valueType);this._unitElement.textContent=" "+e}else this._unitElement.textContent="";else"dash"===this._notAvailableValue?(this._valueElement.textContent="-",this._unitElement.textContent=""):"empty"===this._notAvailableValue?(this._valueElement.textContent="",this._unitElement.textContent=""):"natext"===this._notAvailableValue?(this._valueElement.textContent="N/A",this._unitElement.textContent=""):(this._valueElement.textContent="",this._unitElement.textContent="")}_drawOffValue(){this._unitElement.textContent="","zero"===this._offValue?this._valueElement.textContent=this.formatter.format(0):"dash"===this._offValue?(this._valueElement.textContent="-",this._unitElement.textContent=""):"empty"===this._offValue?this._valueElement.textContent="":"natext"===this._offValue?this._valueElement.textContent="N/A":this._valueElement.textContent=""}_createTextFormatter(){let e;if(this._formatMode===$.decimals)e=Intl.NumberFormat(void 0,{minimumFractionDigits:this._decimalPlaces,maximumFractionDigits:this._decimalPlaces,useGrouping:!1});else if(this._formatMode===$.fixed){const t=Math.max(this._formatSetting-this._decimalPlaces,1);e=Intl.NumberFormat(void 0,{minimumIntegerDigits:t,minimumFractionDigits:this._decimalPlaces,maximumFractionDigits:this._decimalPlaces,useGrouping:!1})}else e=Intl.NumberFormat(void 0,{useGrouping:!1});return e}}!function(e){e.decimals="decimals",e.fixed="fixed"}($||($={}));class ue extends te{constructor(e,t){super(e,t)}allowSignalTypes(){return[]}onRedraw(){}onInitialize(){}}function he(e,t,i,s){var a,n=!1,o=0;function l(){a&&clearTimeout(a)}function r(){for(var r=arguments.length,u=new Array(r),h=0;h<r;h++)u[h]=arguments[h];var _=this,d=Date.now()-o;function c(){o=Date.now(),i.apply(_,u)}function E(){a=void 0}n||(s&&!a&&c(),l(),void 0===s&&d>e?c():!0!==t&&(a=setTimeout(s?E:c,void 0===s?e-d:e)))}return"boolean"!=typeof t&&(s=i,i=t,t=void 0),r.cancel=function(){l(),n=!0},r}class _e extends te{constructor(e,t){super(e,t),this._error1=!1,this._error2=!1,this._on=!1}allowSignalTypes(){return[p.dimmer]}registerEvents(){["mousedown","touchstart"].forEach((e=>this.element.addEventListener(e,(e=>(this.onButtonDown(e),e.stopPropagation(),["mousemove","touchmove"].forEach((e=>document.addEventListener(e,this._globalMouseMoveEvent))),["mouseup","touchend","touchcancel"].forEach((e=>document.addEventListener(e,this._globalMouseUpEvent))),e.preventDefault(),!1))))),["mouseup","touchend","touchcancel"].forEach((e=>this.element.addEventListener(e,(e=>(this.onButtonUp(e),e.preventDefault(),!1))))),window.addEventListener("resize",(()=>{this._throttleRefresh()}))}onUnavailableChanged(){this.isUnavailable&&this.onButtonUp(null)}onButtonDown(e){if(this._readOnly||this.isUnavailable)return void(this._moving=!1);this._moving=!0;const t=void 0===e.originalEvent?e:e.originalEvent;let i=0,s=0;"touchstart"===t.type?(i=t.touches[0].pageX,s=t.touches[0].pageY):(i=t.pageX,s=t.pageY),this.updatePosition(i,s)}onButtonUp(e){this._moving=!1,this._debounceRefreshByFeedBackValue(),this._throttleRefresh(),["mousemove","touchmove"].forEach((e=>document.removeEventListener(e,this._globalMouseMoveEvent))),["mouseup","touchend","touchcancel"].forEach((e=>document.removeEventListener(e,this._globalMouseUpEvent)))}onButtonMove(e){if(this._readOnly||this.isUnavailable)return void(this._moving=!1);const t=void 0===e.originalEvent?e:e.originalEvent;let i=0,s=0;"touchmove"===t.type?(i=t.touches[0].pageX,s=t.touches[0].pageY):(i=t.pageX,s=t.pageY),this.updatePosition(i,s)}updatePosition(e,t){if(null==this._handleElement)return;const i=this.element.getBoundingClientRect(),s=e-(i.left+i.width/2),a=t-(i.top+i.height/2),n=parseFloat(getComputedStyle(this._handleElement).getPropertyValue("width")),o=parseFloat(getComputedStyle(this.element).getPropertyValue("width"));let l=s*Math.cos(-this._rotation*Math.PI/180)-a*Math.sin(-this._rotation*Math.PI/180);l+=o/2,l-=n/2;const r=o-n;l<0?l=0:l>r&&(l=r);const u=(l-0)/(r-0)*(this._maxValue-this._minValue)+this._minValue;this.setValue(u),this._throttleRefresh()}setValue(e){this._value=e,this._throttleSendData(e)}sendData(e){this.communicationHandler.send(V.dimmerCommand(this.mfdSignalId,e,0))}onRedraw(){if(null==this._handleElement)return;const e=parseFloat(getComputedStyle(this._handleElement).getPropertyValue("width")),t=parseFloat(getComputedStyle(this.element).getPropertyValue("width")),i=t-e,s=this._clampValue(),a=`${(s-this._minValue)/(this._maxValue-this._minValue)*(i-0)+0}px`;this._setLeft(a,this._handleElement),this._setLeft(a,this._handleOnElement),this._setLeft(a,this._handlePressedElement),this._setLeft(a,this._handleError1Element),this._setLeft(a,this._handleError2Element),this._setLeft(a,this._handleError12Element),this._setLeft(a,this._handleNotAvailableElement);const n=parseFloat(getComputedStyle(this.element).getPropertyValue("height")),o=`${n/2-parseFloat(getComputedStyle(this._handleElement).getPropertyValue("height"))/2}px`;this._setTop(o,this._handleElement),this._setTop(o,this._handleOnElement),this._setTop(o,this._handlePressedElement),this._setTop(o,this._handleError1Element),this._setTop(o,this._handleError2Element),this._setTop(o,this._handleError12Element),this._setTop(o,this._handleNotAvailableElement);const l=(s-this._minValue)/(this._maxValue-this._minValue)*t;null!=this._trackFillElement&&(this._trackFillElement.style.clip=`rect(0px, ${l}, ${n}, 0px)`),Q.setElementVisibility(this._handlePressedElement,this._moving),Q.setElementVisibility(this._handleOnElement,this._on),Q.setElementVisibility(this._error1Element,this._error1),Q.setElementVisibility(this._error2Element,this._error2),Q.setElementVisibility(this._error12Element,this._error1&&this._error2),Q.setElementVisibility(this._notAvailableElement,this.isUnavailable),Q.setElementVisibility(this._handleError1Element,this._error1),Q.setElementVisibility(this._handleError2Element,this._error2),Q.setElementVisibility(this._handleError12Element,this._error1&&this._error2),Q.setElementVisibility(this._handleNotAvailableElement,this.isUnavailable)}onMfdDataReceived(e){this._error1=e.err1FT,this._error2=e.err2UC,this._on=e.onOffStatus,this._feedBackValue=e.dimmerValue,this._moving||(this._value=this._feedBackValue,this._throttleRefresh())}onInitialize(){var e,t,i;this._rotation=null==this.element.dataset.rotation?0:parseFloat(this.element.dataset.rotation),this._readOnly=Z.parseBooleanArgument(this.element.dataset.readOnly),this._minValue=parseInt(this.element.dataset.minValue,10),this._maxValue=parseInt(this.element.dataset.maxValue,10),this.registerEvents(),this._moving=!1,this._trackFillElement=this.element.querySelector(".slider-track-fill"),this._error1Element=this.element.querySelector(".slider-error1"),this._error2Element=this.element.querySelector(".slider-error2"),this._error12Element=this.element.querySelector(".slider-error12"),this._notAvailableElement=this.element.querySelector(".slider-service-unavailable"),this._handleElement=this.element.querySelector(".slider-handle-bg"),this._handlePressedElement=this.element.querySelector(".slider-handle-pressed"),this._handleOnElement=this.element.querySelector(".slider-handle-on"),this._handleError1Element=this.element.querySelector(".slider-handle-error1"),this._handleError2Element=this.element.querySelector(".slider-handle-error2"),this._handleError12Element=this.element.querySelector(".slider-handle-error12"),this._handleNotAvailableElement=this.element.querySelector(".slider-handle-service-unavailable"),this._globalMouseUpEvent=e=>(this.onButtonUp(e),e.preventDefault(),!1),this._globalMouseMoveEvent=e=>this._moving?(this.onButtonMove(e),e.preventDefault(),!1):(e.preventDefault(),!0),this._throttleSendData=he(250,(e=>{this.sendData(e)})),this._throttleRefresh=he(50,(()=>{this.refresh()})),this._debounceRefreshByFeedBackValue=(e=2e3,t=()=>{this._value=this._feedBackValue,this._throttleRefresh()},void 0===i?he(e,t,!1):he(e,i,!1!==t)),this._value=this._minValue}_clampValue(){let e=this._value;return e<this._minValue?e=this._minValue:e>this._maxValue&&(e=this._maxValue),e}_setTop(e,t){null!=t&&(t.style.top=e)}_setLeft(e,t){null!=t&&(t.style.left=e)}}class de extends te{constructor(e,t){super(e,t),this._error1=!1,this._error2=!1,this._on=!1}allowSignalTypes(){return[p.pulse,p.momentary,p.dimmer]}onRedraw(){this._stackImages?(Q.showElement(this._imgOff),Q.setElementVisibility(this._imgOn,this._on),Q.setElementVisibility(this._imgError12,this._error1&&this._error2),Q.setElementVisibility(this._imgError1,this._error1),Q.setElementVisibility(this._imgError2,this._error2),Q.setElementVisibility(this._imgNotAvailable,this.isUnavailable)):(Q.hideElement(this._imgOff),Q.hideElement(this._imgOn),Q.hideElement(this._imgError1),Q.hideElement(this._imgError2),Q.hideElement(this._imgError12),Q.hideElement(this._imgNotAvailable),this.isUnavailable?Q.showElement(this._imgNotAvailable):this._error1&&this._error2?Q.showElement(this._imgError12):this._error1?Q.showElement(this._imgError1):this._error2?Q.showElement(this._imgError2):this._on?Q.showElement(this._imgOn):Q.showElement(this._imgOff))}onMfdDataReceived(e){this._error1=e.err1FT,this._error2=e.err2UC,this._on=e.onOffStatus,this.refresh()}onNmeaDataReceived(e){this._on=e.value>0,this.isUnavailable=e.unavailable,this.refresh()}onInitialize(){this._imgOff=this.element.querySelector("img.indicator-off"),this._imgOn=this.element.querySelector("img.indicator-on"),this._imgError1=this.element.querySelector("img.indicator-error1"),this._imgError2=this.element.querySelector("img.indicator-error2"),this._imgError12=this.element.querySelector("img.indicator-error12"),this._imgNotAvailable=this.element.querySelector("img.indicator-notavailable"),this._stackImages=Z.parseBooleanArgument(this.element.dataset.stackImages)}}class ce{constructor(e,t,i,s){this._visible=!1,this._layers=null,this._element=e,this._pageId=t,this._viewPortId=i,this._isStartPage=s}get isStartPage(){return this._isStartPage}get viewPortId(){return this._viewPortId}get isVisible(){return this._visible}get pageId(){return this._pageId}initialize(e){this._layers=e}getLayers(){return this._layers}getLayer(e){return this._layers.find((t=>t.id===e))}redraw(){for(const e of this._layers)e.redraw()}setVisibility(e){if(Q.setElementVisibility(this._element,e),this._visible!==e){this._visible=e;for(const e of this._layers)e.onParentVisibilityChanged()}}}class Ee extends te{constructor(e,t){super(e,t),this._bgColor="0,0,0",this._opacityLevel=0}allowSignalTypes(){return[]}onRedraw(){this.element.style.background=this._rgbaValue}get ebpSignalIds(){return[this._bgColorEbpSignalId,this._opacityEbpSignalId]}onOpacityDataReceived(e){this._opacityLevel=e.value/1e3,this.refresh()}onColorDataReceived(e){const t=e.value/100,i=t>>0&255,s=t>>8&255,a=t>>16&255;this._bgColor=`${a},${s},${i}`,this.refresh()}onInitialize(){this._bgColorEbpSignalId=parseInt(this.element.dataset.ebpBgcolorSignalId,10),this._opacityEbpSignalId=parseInt(this.element.dataset.ebpOpacitySignalId,10),isNaN(this._bgColorEbpSignalId)||this.communicationHandler.addOnMfdValueReceivedDelegate(this._bgColorEbpSignalId,(e=>this.onColorDataReceived(e))),isNaN(this._opacityEbpSignalId)||this.communicationHandler.addOnMfdValueReceivedDelegate(this._opacityEbpSignalId,(e=>this.onOpacityDataReceived(e)))}get _rgbaValue(){return`rgba(${this._bgColor}, ${this._opacityLevel})`}}class me extends ee{onUnavailableChanged(){}allowSignalTypes(){return[]}evaluateVisibility(){}constructor(e,t,i){super(t,e),this._isUnavailable=!1,this._isVisible=!1,this._element=e,this._page=i,this._id=e.id,this._visible=Z.parseBooleanArgument(e.dataset.showInitially)}get id(){return this._id}get visible(){return this._visible}set visible(e){if(this._visible=e,this._evaluateVisibility(),this._isUnavailable)return;const t=this._visible&&this._page.isVisible;for(const i of this._components)i.setVisibility(t?K.visible:K.hidden)}onMfdDataReceived(e){this._isUnavailable!==e.unavailable&&(this._isUnavailable=e.unavailable,this.visible=!this._isUnavailable)}onNmeaDataReceived(e){this._isUnavailable!==e.unavailable&&(this._isUnavailable=e.unavailable,this.visible=!this._isUnavailable)}initialize(e){this._components=e||[],this.visible=this._visible}onParentVisibilityChanged(){const e=this._visible&&this._page.isVisible;for(const t of this._components)t.setVisibility(e?K.visible:K.hidden)}redraw(){if(this._visible)for(const e of this._components)e.refresh()}_evaluateVisibility(){const e=this.visible&&!this._isUnavailable;e!==this._isVisible&&(this._isVisible=e,Q.setElementVisibility(this._element,e))}}class ge{constructor(e,t,i,s){this._visible=!1,this._element=e,this.id=t,this.aspectRatio=i,this.screenSaverPageId=s}get isVisible(){return this._visible}setVisibility(e){Q.setElementVisibility(this._element,e),this._visible!==e&&(this._visible=e)}}class ve extends te{constructor(e,t,i){super(e,t),this._isPressed=!1,this._screenSaver=i}allowSignalTypes(){return[]}onRedraw(){const e=this._screenSaver.isEnabled,t=e&&this._isPressed;this._stackImages?(Q.setElementVisibility(this._imageEnabled,!0),Q.setElementVisibility(this._imagePressed,t),Q.setElementVisibility(this._imageDisabled,!e)):(Q.hideElement(this._imageEnabled),Q.hideElement(this._imageDisabled),Q.hideElement(this._imagePressed),e&&!t?Q.showElement(this._imageEnabled):e&&t?Q.showElement(this._imagePressed):Q.showElement(this._imageDisabled))}onInitialize(){this._imageEnabled=this.element.querySelector(".screensaver-enabled"),this._imagePressed=this.element.querySelector(".screensaver-pressed"),this._imageDisabled=this.element.querySelector(".screensaver-disabled"),this._stackImages=this._stackImages=Z.parseBooleanArgument(this.element.dataset.stackImages),this._registerEvents(),this._globalMouseUpEvent=e=>(this._buttonUp(),e.preventDefault(),!1),this._screenSaver.onScreensaverEnabled((()=>this.refresh())),this.refresh()}_registerEvents(){["mousedown","touchstart"].forEach((e=>this.element.addEventListener(e,(e=>(this._buttonDown(e),e.preventDefault(),e.stopPropagation(),!1))))),["mouseup","touchend","touchcancel"].forEach((e=>this.element.addEventListener(e,(e=>(this._buttonUp(),e.preventDefault(),e.stopPropagation(),!1)))))}_buttonDown(e){"mousedown"===e.type&&document.addEventListener("click",this._globalMouseUpEvent),this._isPressed=!0,this.refresh()}_buttonUp(){document.removeEventListener("click",this._globalMouseUpEvent),this._isPressed=!1,this._screenSaver.activate(),this.refresh()}}!function(e){e[e.animating=0]="animating",e[e.animationDisabledDueToInvisibility=1]="animationDisabledDueToInvisibility",e[e.animationDisabledEnableNextFrame=2]="animationDisabledEnableNextFrame"}(j||(j={}));class pe extends te{constructor(e,t){super(e,t),this._value=0,this._position=0,this._currentAnimationPosition=0,this._canvasImage=null,this._animationFrameRequested=!1,this._animationState=j.animationDisabledDueToInvisibility}get currentValue(){return this._value}get currentPosition(){return this._position}get startPosition(){return this._startPosition}get endPosition(){return this._endPosition}get counterClockwise(){return this._counterClockwise}allowSignalTypes(){return[p.statusUpdate]}onRedraw(){this._startAnimationTimestamp=null,this._startAnimationPosition=this._currentAnimationPosition,this._animationFrameRequested&&window.cancelAnimationFrame(this._animationRequestFrameId),this._animationRequestFrameId=window.requestAnimationFrame((e=>this._drawSlicedOverlay(e))),this._animationFrameRequested=!0}onVisibilityChanged(e){e?(this._canvasElement.height=parseFloat(getComputedStyle(this.element).getPropertyValue("height")),this._canvasElement.width=parseFloat(getComputedStyle(this.element).getPropertyValue("width"))):e||(this._animationState=j.animationDisabledDueToInvisibility)}onMfdDataReceived(e){this._updateValue(e.value,e.valueTypeIdentifier)}onNmeaDataReceived(e){this._updateValue(e.value,e.valueTypeIdentifier)}onInitialize(){this._parseAttributes(),this._setDomElements(),this._addAnimationStyle(),this._positionRange=this._endPosition-this._startPosition,this._valueRange=this._maxValue-this._minValue,this._counterClockwise=this._endPosition<this._startPosition,this._position=this._startPosition,this._canvasElement.height=parseFloat(getComputedStyle(this.element).getPropertyValue("height")),this._canvasElement.width=parseFloat(getComputedStyle(this.element).getPropertyValue("width")),window.addEventListener("resize",(()=>{this._canvasElement.height=parseFloat(getComputedStyle(this.element).getPropertyValue("height")),this._canvasElement.width=parseFloat(getComputedStyle(this.element).getPropertyValue("width")),this.refresh()}))}_setDomElements(){this._overlayImage=this.element.querySelector(".gauge-overlay"),null!=this._overlayImage&&(Q.hideElement(this._overlayImage),this._canvasElement=document.createElement("canvas"),this._canvasElement.height=parseFloat(getComputedStyle(this.element).getPropertyValue("height")),this._canvasElement.width=parseFloat(getComputedStyle(this.element).getPropertyValue("width")),this.element.appendChild(this._canvasElement),this._canvasImage=new Image,this._canvasImage.src=this._overlayImage.getAttribute("src"))}_addAnimationStyle(){this._disableAnimation||this._overlayImage.classList.add("gauge-animation")}_parseAttributes(){this._minValue=parseInt(this.element.dataset.minValue,10),this._maxValue=parseInt(this.element.dataset.maxValue,10),this._startPosition=parseInt(this.element.dataset.startPosition,10),this._endPosition=parseInt(this.element.dataset.endPosition,10),this._disableAnimation=Z.parseBooleanArgument(this.element.dataset.disableAnimation)}_drawSlicedOverlay(e){if(this._disableAnimation)this._currentAnimationPosition=this._position;else if(this._animationState!==j.animating)this._currentAnimationPosition=this._position,this._animationState===j.animationDisabledEnableNextFrame&&(this._animationState=j.animating);else{const t=null==this._startAnimationTimestamp?0:e-this._startAnimationTimestamp;null==this._startAnimationTimestamp&&(this._startAnimationTimestamp=e);const i=500,s=Math.min(t/i,1),a=Math.pow(s,2)/(Math.pow(s,2)+Math.pow(1-s,2));this._currentAnimationPosition=(this._position-this._startAnimationPosition)*a+this._startAnimationPosition}const t=this._canvasElement.width/2,i=this._canvasElement.height/2,s=this._canvasElement.width/2,a=this._canvasElement.getContext("2d");a.clearRect(0,0,this._canvasElement.width,this._canvasElement.height),a.save();const n=Math.PI/180*(this._startPosition+-90),o=Math.PI/180*(this._currentAnimationPosition+-90);a.beginPath(),a.moveTo(t,i),this._counterClockwise?a.arc(t,i,s,o,n):a.arc(t,i,s,n,o),a.lineTo(t,i),a.clip(),a.drawImage(this._canvasImage,0,0,this._canvasElement.width,this._canvasElement.height),a.restore(),Math.abs(this._currentAnimationPosition-this._position)<.001?(this._currentAnimationPosition=this._position,this._animationFrameRequested=!1,this._animationRequestFrameId=0):(this._animationFrameRequested=!0,this._animationRequestFrameId=window.requestAnimationFrame(this._drawSlicedOverlay.bind(this)))}_updateValue(e,t){this._animationState!==j.animating&&(this._animationState=j.animationDisabledEnableNextFrame),this._value=Z.clamp(e,this._minValue,this._maxValue);const i=(this._value-this._minValue)/this._valueRange;this._position=this._positionRange*i+this._startPosition,this.refresh()}}class Te{constructor(e,t,i,s,a){this._communicationHandler=null,this._valueConverter=null,this._pageNavigator=null,this._screenSaver=null,this._magnitudeConverter=null,this._valueConverter=e,this._pageNavigator=t,this._communicationHandler=i,this._screenSaver=s,this._magnitudeConverter=a}create(){const e=[],t=[],i=Array.from(document.querySelectorAll(".page-collection"));for(const s of i){const i=s.dataset.pageCollectionId,a=s.dataset.screenSaverPageId,n=parseFloat(s.dataset.aspectRatio),o=Array.from(s.querySelectorAll(".page")),l=new ge(s,i,n,a);t.push(l);let r=!0;for(const t of o){const s=t.id,a=new ce(t,s,i,r);r=!1,e.push(a);const n=this._createLayers(t,a);a.initialize(n)}}return[e,t]}_createComponents(e){const t=[];return e.querySelectorAll(".component").forEach((e=>{const i=this.createComponent(e);null!=i&&(i.initialize(),t.push(i))})),t}_createLayers(e,t){const i=[];return e.querySelectorAll(".layer").forEach((e=>{const s=this.createLayer(e,t),a=this._createComponents(e);s.initialize(a),i.push(s)})),i}createLayer(e,t){return new me(e,this._communicationHandler,t)}createComponent(e){return e.classList.contains("gauge")?Z.parseBooleanArgument(e.dataset.useSlicedOverlay)?new pe(e,this._communicationHandler):new ie(e,this._communicationHandler):e.classList.contains("button")?new se(e,this._communicationHandler):e.classList.contains("levelgauge")?new ae(e,this._communicationHandler):e.classList.contains("image")?new ne(e,this._communicationHandler):e.classList.contains("navigationbutton")?new le(e,this._communicationHandler,this._pageNavigator):e.classList.contains("signalvalue")?new re(e,this._communicationHandler,this._valueConverter,this._magnitudeConverter):e.classList.contains("textbox")?new ue(e,this._communicationHandler):e.classList.contains("slider")?new _e(e,this._communicationHandler):e.classList.contains("indicator")?new de(e,this._communicationHandler):e.classList.contains("colorrectangle")?new Ee(e,this._communicationHandler):e.classList.contains("screensaver-button")?new ve(e,this._communicationHandler,this._screenSaver):(N.logError("Unknown component found."),null)}}class Se{constructor(){document.querySelector(".external-page").classList.add("hidden"),this._externalPageBackButton=document.querySelector(".external-page-navigation-back"),["mousedown","click","touchstart"].forEach((e=>this._externalPageBackButton.addEventListener(e,(()=>{this._onBackButtonClick()}))))}show(e,t){this._onHideCallback=t,"/"===e.charAt(0)&&(e=e.slice(1)),document.querySelector(".external-page-iframe").classList.add("hidden"),document.querySelector(".external-page-status").classList.remove("hidden"),document.querySelector(".external-page-status-text").innerHTML="Loading...",setTimeout((()=>{document.querySelector(".external-page-iframe").classList.remove("hidden"),document.querySelector(".external-page-status").classList.add("hidden")}),2e3),document.querySelector(".external-page").classList.remove("hidden"),e.includes("?")?document.querySelector(".external-page-iframe").setAttribute("src",e+"&disableNavigationBar=1"):document.querySelector(".external-page-iframe").setAttribute("src",e+"?disableNavigationBar=1")}hide(){document.querySelector(".external-page").classList.add("hidden"),document.querySelector(".external-page-iframe").setAttribute("src",""),this._onHideCallback=null}_onBackButtonClick(){const e=this._onHideCallback;this.hide(),null!=e&&e()}}class be{static cleanUrl(e){if(!e.includes("?"))return e;const t=e.split("?");let i=e;return t.forEach(((e,t)=>{0===t?(i=e,i+="?"):(i+=e,i+="&")})),i=i.substring(0,i.length-1),i}static getUrlParamValue(e){const t=new URL(be.cleanUrl(window.location.href)).searchParams.get(e);return null==t?"":t}static removeUrlParameter(e){const t=this.removeUrlParameterHref(e,window.location.href);window.history.pushState("","",t.toString())}static removeUrlParameterHref(e,t){const i=new URL(be.cleanUrl(t));return i.searchParams.delete(e),i.toString()}static getPathWithReturnUrl(e,t){const i=new URL(window.location.href);return t.forEach(((e,t)=>{i.searchParams.append(t,e)})),e+"?returnUrl="+encodeURIComponent(i.toString())}static createUrlWithReturnParameter(e,t=null){if(""===e)return"";let i=`${"http://"+window.location.host}/${e}`;const s=be.cleanUrl(window.location.href),a=new URL(s),n=a.searchParams.getAll("returnUrl");a.searchParams.delete("returnUrl"),null!=t&&a.searchParams.append("pageId",t);const o=encodeURIComponent(a.toString()),l=[];return n.forEach((e=>{l.push("returnUrl="+encodeURIComponent(e))})),l.push("returnUrl="+o),l.forEach(((e,t)=>{i+=0===t?"?":"&",i+=e})),i}}class Ie{constructor(){this._maxHistoryLength=10,this._pages=[],this._currentViewPort=null,this._externalPageNavigator=new Se,this._history=[],this._activePageId=""}static createUrlWithReturnParameter(e,t=null){return be.createUrlWithReturnParameter(e,t)}setPages(e){this._pages=e,this._pages.length>0&&this._setActivePage(this._pages[0],!0)}setActivePageByViewPort(e){this.hideAllPages(),this._currentViewPort=e,this._history.length=0;const t=be.getUrlParamValue("pageId");be.removeUrlParameter("pageId");let i=this._pages.find((e=>e.viewPortId===this._currentViewPort.id&&e.pageId===t));null!=i||(i=this._pages.find((t=>t.viewPortId===e.id&&t.isStartPage))),this._setActivePage(i,!0)}setActivePageById(e){let t=this._pages.find((t=>t.pageId===e&&t.viewPortId===this._currentViewPort.id));null==t&&(t=this._pages.find((e=>e.viewPortId===this._currentViewPort.id&&e.isStartPage))),this._setActivePage(t,!0)}setActiveExternalPage(e){const t=new De;t.externalPageUrl=e,this._history.splice(0,0,t);const i=Ie.createUrlWithReturnParameter(e,this._activePageId);window.location.href=i}navigateBack(){if(this._history.length<2)return;const e=this._history[1];this._history.shift(),e.isExternalPage?this._setActiveExternalPage(e.externalPageUrl,!1):null!=e.page&&this._setActivePage(e.page,!1)}getActivePage(){const e=this._history.length>0?this._history[0].page:null;return this._pages.find((t=>t===e))}getActiveViewPort(){return this._currentViewPort}hideAllPages(){for(const e of this._pages)e.setVisibility(!1)}_setActivePage(e,t){if(this._externalPageNavigator.hide(),t){const t=new De;for(t.page=e,this._history.splice(0,0,t);this._history.length>=this._maxHistoryLength;)this._history.pop()}for(const i of this._pages){const t=e===i;i.setVisibility(t),t&&(i.redraw(),this._activePageId=i.pageId)}}_setActiveExternalPage(e,t){if(t){const t=new De;t.externalPageUrl=e,this._history.splice(0,0,t)}this.hideAllPages(),this._externalPageNavigator.show(e,(()=>this.navigateBack()))}}class De{constructor(){this.page=null,this.externalPageUrl=null}get isExternalPage(){return null!=this.externalPageUrl}}class ye{constructor(e,t){this._communicationHandler=null,this._imagesLoaded=!1,this._showWarnings=!0,this._warningHideTimeout=6e4,this._hideWarningPressTimeout=5e3,this._lastKnownChecksum=null,this._holdDownTimeout=null,this._communicationHandler=e,this._netlistChecksumHandler=t}initialize(){this._overlayWebSocketError=document.querySelector(".overlay.overlay-websocket-error"),this._overlayBusError=document.querySelector(".overlay.overlay-bus-error"),this._overlayStarting=document.querySelector(".overlay.overlay-start"),this._overlayReload=document.querySelector(".overlay.overlay-reload"),this._overlayWhitePageBlocker=document.getElementById("overlay-white-page-blocker"),this._overlayWarningChecksum=document.getElementById("checksum-warning-message"),this._overlayWarningTest=document.getElementById("test-warning-message"),this._setOverlayStarting(!0),this._setOverlayWebSocketError(!1),this._setOverlayBusError(!1),this._setOverlayReload(!1),this._drawOverlayWarnings(),this._removeWhitePageBlocker(),this._imageLoadedNotifier(),this._registerWarningTouchEvents(),this._communicationHandler.addWatchdogStateChangedDelegate((e=>this._onSocketStateChanged(e))),this._communicationHandler.addOnCommandReceivedDelegate((e=>this._onCommandReceived(e))),this._globalMouseUpEvent=e=>(this._buttonUp(e),e.preventDefault(),!1)}_imageLoadedNotifier(){return m(this,void 0,void 0,(function*(){yield Promise.all(Array.from(document.images).map((e=>e.complete?Promise.resolve(0!==e.naturalHeight):new Promise((t=>{e.addEventListener("load",(()=>t(!0))),e.addEventListener("error",(()=>t(!1)))}))))).then((e=>{e.every((e=>e)),this._imagesLoaded=!0,this._calculateOverlay()}))}))}_hideWarnings(){this._showWarnings&&(this._showWarnings=!1,this._drawOverlayWarnings(),setTimeout((()=>{this._showWarnings=!0,this._drawOverlayWarnings()}),this._warningHideTimeout))}_drawOverlayWarnings(){this._calculateChecksumWarning(),this._calculateTestWaring()}_registerWarningTouchEvents(){["mousedown","touchstart"].forEach((e=>{this._overlayWarningTest.addEventListener(e,(e=>{this._hideWarningsEventListener(e),e.stopPropagation()})),this._overlayWarningChecksum.addEventListener(e,(e=>{this._hideWarningsEventListener(e),e.stopPropagation()}))}))}_buttonUp(e){if(document.removeEventListener("mouseup",this._globalMouseUpEvent),null!=this._holdDownTimeout)return clearTimeout(this._holdDownTimeout),void(this._holdDownTimeout=null)}_hideWarningsEventListener(e){"mousedown"===e.type&&document.addEventListener("mouseup",this._globalMouseUpEvent),this._holdDownTimeout=setTimeout((()=>this._hideWarnings()),this._hideWarningPressTimeout),e.preventDefault()}_removeWhitePageBlocker(){null!=this._overlayWhitePageBlocker&&this._overlayWhitePageBlocker.remove()}_setOverlayWebSocketError(e){Q.setElementVisibility(this._overlayWebSocketError,e)}_setOverlayBusError(e){Q.setElementVisibility(this._overlayBusError,e)}_setOverlayStarting(e){null!=this._overlayStarting&&(e?Q.showElement(this._overlayStarting):this._netlistChecksumHandler.hasBothChecksums()?this._netlistChecksumHandler.isChecksumValid()?Q.hideElement(this._overlayStarting):(Q.showElement(this._overlayStarting.querySelector(".checksum-warning")),setTimeout((()=>{Q.hideElement(this._overlayStarting)}),5e3)):setTimeout((()=>{this._setOverlayStarting(!1)}),500))}_setOverlayReload(e){Q.setElementVisibility(this._overlayReload,e)}_calculateTestWaring(){if(null!=this._overlayWarningTest){const e=this._overlayWarningTest.innerText;null!=e&&e.trim().length>0&&this._showWarnings?Q.setElementVisibility(this._overlayWarningTest,!0):Q.setElementVisibility(this._overlayWarningTest,!1)}}_calculateChecksumWarning(){if(this._netlistChecksumHandler.hasBothChecksums()){let e=this._showWarnings;N.logDebug("show warnings: "+this._showWarnings),null!=this._lastKnownChecksum&&this._lastKnownChecksum!==this._netlistChecksumHandler.configurationChecksumFromWDU&&(e=!0,N.logDebug("Last known checksum has changed!")),this._netlistChecksumHandler.isChecksumValid()?this._setChecksumBusError(!1):e?(N.logDebug("Configuration checksum from projectinfo: "+this._netlistChecksumHandler.configurationChecksumFromProject),N.logDebug("Configuration checksum from WDU: "+this._netlistChecksumHandler.configurationChecksumFromWDU),N.logDebug("Last known checksum: "+this._lastKnownChecksum),this._setChecksumBusError(!0)):this._setChecksumBusError(!1)}this._lastKnownChecksum=this._netlistChecksumHandler.configurationChecksumFromWDU}_setChecksumBusError(e){Q.setElementVisibility(this._overlayWarningChecksum,e)}_onSocketStateChanged(e){this._watchdogState=e,this._calculateOverlay()}_calculateOverlay(){if(this._imagesLoaded)switch(this._watchdogState){case C.ok:this._setOverlayWebSocketError(!1),this._setOverlayBusError(!1),this._setOverlayStarting(!1);break;case C.noConnectionToWdu:this._setOverlayWebSocketError(!0),this._setOverlayBusError(!1);break;case C.noConnectionToDigitalSwitching:this._setOverlayWebSocketError(!1),this._setOverlayBusError(!0)}}_onCommandReceived(e){switch(e){case A.forcePageReload:this._setOverlayReload(!0);break;case A.checksumReceived:N.logDebug("Service Provider checksum received"),this._calculateChecksumWarning()}}}class Re{constructor(e){this._webSocketManager=e}start(){this._webSocketManager.addOnSocketStateChangedDelegate((e=>{e===z.open&&(N.logInfo("Web socket state changed to open. About to start a new subscription"),this._sendSubscriptionRequests(),this._sendN2kSubscriptionRequestsToWdu())}))}_sendSubscriptionRequests(){const e=document.getElementById("mfd-channel-subscription");null!=e&&this._webSocketManager.send(e.innerHTML)}_sendN2kSubscriptionRequestsToWdu(){null!=document.getElementById("n2k-dataItem-subscription")&&this._webSocketManager.send(document.getElementById("n2k-dataItem-subscription").innerHTML)}}class fe{constructor(e,t){this._activeViewPortId=null,this._pageNavigator=e,this._screenSaver=t,window.addEventListener("resize",(()=>this._changeViewPortBasedOnWindowSize()))}setViewPorts(e){this._viewPorts=e,this._changeViewPortBasedOnWindowSize()}_changeViewPortBasedOnWindowSize(){N.logInfo(`Windows size change, window.innerwidth: ${window.innerWidth}, windos.innerHeight ${window.innerHeight}`);const e=window.innerWidth/window.innerHeight;N.logInfo(`Current aspectRatio: ${e}`);const t=this._viewPorts.sort(((t,i)=>Math.abs(t.aspectRatio-e)-Math.abs(i.aspectRatio-e)));if(null==t||0===t.length)return;const i=t[0];if(i.id!==this._activeViewPortId){for(const e of this._viewPorts)e.setVisibility(!1);N.logInfo(`Selected viewPort Id: ${i.id}`),i.setVisibility(!0),this._activeViewPortId=i.id,this._pageNavigator.setActivePageByViewPort(i),this._screenSaver.reset()}}}class Ae{constructor(e,t){this._screenSaverIdle=0,this._screensaverIsActive=!1,this._intervalTime=1e4,this._ignoreEvents=["mousedown","mousemove","mouseout","mouseover","mouseup","onwheel","touchstart","touchcancel","touchmove"],this._closeEvents=["touchend","click"],this._isEnabled=!1,this._onStatusChangeDelegates=[],this._screenSaverPageId="",this._screenSaverPageExists=!1,this._screenSaverActivatedTime=0,this._settingsReader=e,this._pageNavigator=t,this._lastInputTime=F.timestamp()}initialize(){this._settingsReader.addOnSettingsReloadedDelegate((()=>this._refresh())),this._refresh(),this._registerEvents()}reset(){this._screensaverIsActive=!1,this._lastInputTime=F.timestamp(),this._refresh()}onScreensaverEnabled(e){this._onStatusChangeDelegates.push(e)}get isEnabled(){return this._isEnabled}activate(){this.isEnabled&&(this._lastInputTime=-99999,this._screensaverInterval())}_registerEvents(){const e=this;this._closeEvents.forEach((t=>{window.addEventListener(t,(t=>{e._onValidCloseEvent(t)}),!0)})),this._ignoreEvents.forEach((t=>{document.addEventListener(t,(t=>{e._onIgnoreEvent(t)}),!0)}))}_refresh(){this._ensuerScreenSaverPageExists(),this._ensureEnabled(),clearTimeout(this._currentInterval),!this.isEnabled&&this._screensaverIsActive?(this._pageNavigator.navigateBack(),this._screensaverIsActive=!1):this._currentInterval=setInterval(this._screensaverInterval.bind(this),this._intervalTime)}_ensuerScreenSaverPageExists(){this._screenSaverPageId=null!=this._pageNavigator.getActiveViewPort()?this._pageNavigator.getActiveViewPort().screenSaverPageId:"",this._screenSaverPageExists=""!==this._screenSaverPageId}_ensureEnabled(){const e=this._isEnabled;try{this._screenSaverIdle=60*parseInt(this._settingsReader.getSetting(L.screensaver),10)}catch(t){this._isEnabled=!1}if(this._isEnabled=0!==this._screenSaverIdle,this._isEnabled=!0===this._isEnabled&&this._screenSaverPageExists,e!==this._isEnabled)for(const i of this._onStatusChangeDelegates)i()}_screensaverInterval(){const e=F.elapsedSeconds(this._lastInputTime);!this._screensaverIsActive&&this._isEnabled&&e-this._screenSaverIdle>0&&(this._screensaverIsActive=!0,this._screenSaverActivatedTime=F.timestamp(),this._pageNavigator.setActivePageById(this._screenSaverPageId))}_onIgnoreEvent(e){this._screensaverIsActive&&e.stopPropagation()}_onValidCloseEvent(e){this._lastInputTime=F.timestamp(),this._screensaverIsActive&&F.elapsedSeconds(this._screenSaverActivatedTime)>=1&&(e.stopPropagation(),e.preventDefault(),this._pageNavigator.navigateBack(),this._screensaverIsActive=!1)}}!function(e){e[e.mfd=0]="mfd",e[e.nmea=1]="nmea",e[e.virtual=2]="virtual"}(X||(X={}));class Ce{constructor(){this._nmeaSignalInfoMap=new Map,this._virtualSignalInfoMap=new Map}get useChannelItems(){return this._useChannelItems}decodeN2KDataItem(e){if(e.messagecmd===I.statusUpdate){const t=e.data[0]|e.data[1]<<8,i=new O;return i.signalId=t,i.unavailable=0!=(128&e.data[2]),i.valueTypeIdentifier=e.data[3]|e.data[4]<<8,i.value=this._getValue(t,e.data,5),i}return null}decodeMFDChannelItem(e){const t=e.data[0]|e.data[1]<<8,i=new k;return i.signalId=t,e.messagecmd===b.statusUpdate?(i.signalId=t,i.type=p.statusUpdate,i.valueTypeIdentifier=e.data[3],i.value=this._getInt32Value(t,e.data,4),i.unavailable=0!=(128&e.data[2]),i):e.messagecmd===b.toggle?(i.type=p.pulse,i.onOffStatus=0!=(1&e.data[2]),i.err1FT=0!=(2&e.data[2]),i.err2UC=0!=(8&e.data[2]),i.unavailable=0!=(128&e.data[2]),i):e.messagecmd===b.momentary?(i.type=p.momentary,i.onOffStatus=0!=(1&e.data[2]),i.err1FT=0!=(2&e.data[2]),i.err2UC=0!=(8&e.data[2]),i.unavailable=0!=(128&e.data[2]),i):e.messagecmd===b.dimmerUpdate?(i.type=p.dimmer,i.onOffStatus=0!=(1&e.data[2]),i.err1FT=0!=(2&e.data[2]),i.err2UC=0!=(8&e.data[2]),i.unavailable=0!=(128&e.data[2]),i.dimmerValue=e.data[3]|e.data[4]<<8,i):null}getVirtualSignals(e){const t=this._virtualSignalInfoMap.get(e);return null!=t?t:[]}_getInt32Value(e,t,i){const s=new Uint8Array(t);return new DataView(s.buffer).getInt32(i,!0)}_getValue(e,t,i){const s=new Uint8Array(t),a=new DataView(s.buffer);let n=R.int32;if(this.useChannelItems){const t=this._nmeaSignalInfoMap.get(e);n=null!=t?t.dataType:R.int32}switch(n){case R.int8:return a.getInt8(i);case R.uint8:return a.getUint8(i);case R.int16:return a.getInt16(i,!0);case R.uint16:return a.getUint16(i,!0);case R.int32:return a.getInt32(i,!0);case R.uint32:return a.getUint32(i,!0);case R.int64:return new Number(a.getBigInt64(i,!0)).valueOf();case R.uint64:return new Number(a.getBigUint64(i,!0)).valueOf();case R.bit:return 1&a.getUint8(i)}}initialize(e){return m(this,void 0,void 0,(function*(){if(this._useChannelItems=e,e){const e=yield U.getJsonFile("signal-info.json");if(null!=e){for(const t of e.filter((e=>e.type===X.nmea)))this._nmeaSignalInfoMap.set(t.signalId,t);for(const t of e.filter((e=>e.type===X.virtual))){const e=t.sourceSignalId;if(this._virtualSignalInfoMap.has(e)){this._virtualSignalInfoMap.get(e).push(t)}else this._virtualSignalInfoMap.set(e,[t])}}}}))}}class Le{get configurationChecksumFromWDU(){return this._communicationHandler.configurationChecksumFromWDU}get configurationChecksumFromProject(){return this._configurationChecksumFromProject}constructor(e){this._configurationChecksumFromProject=null,this._communicationHandler=e}initialize(){return m(this,void 0,void 0,(function*(){yield this._getProjectInfo()}))}hasBothChecksums(){return null!=this.configurationChecksumFromWDU&&null!=this._configurationChecksumFromProject}isChecksumValid(){return null!=this.configurationChecksumFromWDU&&null!=this._configurationChecksumFromProject&&this._configurationChecksumFromProject===this.configurationChecksumFromWDU}_getProjectInfo(){return m(this,void 0,void 0,(function*(){try{const e=(yield U.getJsonFile("projectinfo.json")).netlistChecksum;this._configurationChecksumFromProject=null==e?0:parseInt(e,10)}catch(e){}}))}}class we{getConvertedValue(e,t){return e*t}}class Me{constructor(e){this.active=!1,this.spinner=document.querySelector(".app-selector-link-timer"),Q.hideElement(this.spinner),this._onExecute=e,document.addEventListener("mousedown",(e=>(this.active&&clearTimeout(this._timeout),document.addEventListener("mouseup",this._globalMouseUpEvent),document.addEventListener("mousemove",this._globalMouseMoveEvent),this.activate(e.clientX,e.clientY),!1))),document.addEventListener("touchstart",(e=>{this.active&&clearTimeout(this._timeout),document.addEventListener("touchend",this._globalTouchEndEvent),document.addEventListener("touchcancel",this._globalTouchEndEvent),document.addEventListener("touchmove",this._globalTouchMoveEvent,{passive:!0});const t=void 0===e.originalEvent?e:e.originalEvent;return this.activate(t.touches[0].clientX,t.touches[0].clientY),!1}),{passive:!0}),this._globalMouseUpEvent=e=>(this.deactivate(),document.removeEventListener("mouseup",this._globalMouseUpEvent),document.removeEventListener("mousemove",this._globalMouseMoveEvent),!1),this._globalMouseMoveEvent=e=>{if(this.isMoveDistanceTooLong(e.clientX,e.clientY))return this.deactivate(),document.removeEventListener("mouseup",this._globalMouseUpEvent),document.removeEventListener("mousemove",this._globalMouseMoveEvent),!1},this._globalTouchEndEvent=e=>(this.deactivate(),document.removeEventListener("touchend",this._globalTouchEndEvent),document.removeEventListener("touchcancel",this._globalTouchEndEvent),document.removeEventListener("touchmove",this._globalTouchMoveEvent),!1),this._globalTouchMoveEvent=e=>{const t=void 0===e.originalEvent?e:e.originalEvent;return!!this.isMoveDistanceTooLong(t.touches[0].clientX,t.touches[0].clientY)&&(this.deactivate(),document.removeEventListener("touchend",this._globalTouchEndEvent),document.removeEventListener("touchcancel",this._globalTouchEndEvent),document.removeEventListener("touchmove",this._globalTouchMoveEvent),!1)}}activate(e,t){const i=parseInt(window.getComputedStyle(document.body).getPropertyValue("zoom"));null==i||isNaN(i)||(e/=i,t/=i),this.active=!0,this.spinner.style.left=e+"px",this.spinner.style.top=t+"px",this.startPosX=e,this.startPosY=t,Q.showElement(this.spinner),this._timeout=setTimeout((()=>{this._onExecute(),Q.hideElement(this.spinner)}),1e4)}deactivate(){this.active=!1,clearTimeout(this._timeout),Q.hideElement(this.spinner)}isMoveDistanceTooLong(e,t){return Math.sqrt(Math.pow(this.startPosX-e,2)+Math.pow(this.startPosY-t,2))>100}}class Pe{constructor(e){this._pageNavigator=e,this._dialogElement=document.querySelector(".app-selector-link-timer-dialog"),this._navigateButton=document.querySelector(".app-selector-link-timer-dialog-button-navigate"),["mousedown","click","touchstart"].forEach((e=>this._navigateButton.addEventListener(e,(e=>{this.navigate()})))),this._cancelButton=document.querySelector(".app-selector-link-timer-dialog-button-cancel"),["mousedown","click","touchstart"].forEach((e=>this._cancelButton.addEventListener(e,(e=>{this.hideDialog()}))));const t=be.getUrlParamValue("returnUrl");this._returnToAppSelector=null!=t&&""!==t,this._returnToAppSelector?this._navigateButton.innerHTML="Application Selector":this._navigateButton.innerHTML="Settings"}initialize(){this._initializeAppSelectorLinkTimer()}showDialog(){Q.showElement(this._dialogElement)}hideDialog(){Q.hideElement(this._dialogElement)}navigate(){this._returnToAppSelector?document.location="index.html?forceShowList=1":this._pageNavigator.setActiveExternalPage("settings-web/#")}_initializeAppSelectorLinkTimer(){new Me((()=>{this.showDialog()}))}}const Ne=new class{initialize(){return m(this,void 0,void 0,(function*(){const e=new J,t=new Ce;yield t.initialize(!0);const i=new x(e,t),s=new H(i);yield s.load();const a=new q(s),n=new we,o=P.readApplicationSettings(),l=new G(s,o),r=new Ie;new Pe(r).initialize();const u=new Ae(s,r),h=new Te(a,r,i,u,n),[_,d]=h.create();r.setPages(_),u.initialize();new fe(r,u).setViewPorts(d);const c=new Le(i);yield c.initialize();new ye(i,c).initialize(),F.start(),e.connect();new Re(e).start(),yield l.initialize(),N.initialize(),onSystemHasStarted()}))}};document.addEventListener("DOMContentLoaded",(()=>{Ne.initialize()}))})()})();